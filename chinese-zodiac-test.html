<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinese Zodiac Ã— MBTI Deep Personality Analysis</title>
    <style>
        * { box-sizing: border-box; }
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: #111827;
        }
        .container { max-width: 1000px; margin: 0 auto; padding: 24px; }
        .header { text-align: center; color: #fff; margin: 24px 0; }
        .header h1 { margin: 0 0 8px; font-size: 30px; }
        .card { background: rgba(255,255,255,0.98); border-radius: 16px; padding: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.15); margin-bottom: 16px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit,minmax(280px,1fr)); gap: 16px; }
        .btn { display:inline-block; background: linear-gradient(135deg, #f59e0b, #d97706); color:#fff; border:none; padding:10px 18px; border-radius:999px; cursor:pointer; font-weight:600; }
        .btn:hover { transform: translateY(-1px); }
        .btn-secondary { background: linear-gradient(135deg, #94a3b8, #64748b); color:#fff; }
        .muted { color:#6b7280; font-size:14px; }
        .hidden { display: none; }
        .zodiac-card {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 2px solid #f59e0b;
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        .zodiac-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(245, 158, 11, 0.3);
        }
        .zodiac-card.selected {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }
        .zodiac-icon { font-size: 48px; margin-bottom: 10px; }
        .zodiac-name { font-size: 18px; font-weight: 700; margin-bottom: 8px; }
        .zodiac-dates { font-size: 14px; color: #92400e; margin-bottom: 10px; }
        .zodiac-card.selected .zodiac-dates { color: rgba(255,255,255,0.8); }
        .result-section { background: linear-gradient(135deg, #dcfce7, #bbf7d0); border-left: 4px solid #16a34a; }
        .mbti-section { background: linear-gradient(135deg, #dbeafe, #bfdbfe); border-left: 4px solid #3b82f6; }
        .personality-trait { background: #f3f4f6; border-radius: 8px; padding: 12px; margin: 8px 0; }
        .trait-title { font-weight: 600; color: #374151; margin-bottom: 4px; }
        .trait-desc { color: #6b7280; font-size: 14px; }
        .kpi { font-size: 32px; font-weight: 800; color: #d97706; text-align: center; margin: 20px 0; }
        .back-btn { background: #6b7280; margin-left: 10px; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>ğŸ‰ Chinese Zodiac Ã— MBTI Deep Personality Analysis</h1>
            <p class="muted">Explore the fascinating link between the twelve Chinese zodiac animals and MBTI personality types to discover your personality code</p>
            <div style="margin-top: 20px;">
                <button class="btn" onclick="startTest()">ğŸ§ª Start Zodiac Test</button>
                <button class="btn back-btn" onclick="location.href='index.html'">ğŸ  Back to Home</button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Zodiac selection -->
        <div id="zodiac-selection" class="card">
            <h2 style="text-align: center; color: #92400e; margin-bottom: 20px;">Choose Your Chinese Zodiac</h2>
            <div class="grid">
                <div class="zodiac-card" onclick="selectZodiac('rat')">
                    <div class="zodiac-icon">ğŸ€</div>
                    <div class="zodiac-name">Rat</div>
                    <div class="zodiac-dates">1960, 1972, 1984, 1996, 2008, 2020</div>
                </div>
                <div class="zodiac-card" onclick="selectZodiac('ox')">
                    <div class="zodiac-icon">ğŸ‚</div>
                    <div class="zodiac-name">Ox</div>
                    <div class="zodiac-dates">1961, 1973, 1985, 1997, 2009, 2021</div>
                </div>
                <div class="zodiac-card" onclick="selectZodiac('tiger')">
                    <div class="zodiac-icon">ğŸ…</div>
                    <div class="zodiac-name">Tiger</div>
                    <div class="zodiac-dates">1962, 1974, 1986, 1998, 2010, 2022</div>
                </div>
                <div class="zodiac-card" onclick="selectZodiac('rabbit')">
                    <div class="zodiac-icon">ğŸ‡</div>
                    <div class="zodiac-name">Rabbit</div>
                    <div class="zodiac-dates">1963, 1975, 1987, 1999, 2011, 2023</div>
                </div>
                <div class="zodiac-card" onclick="selectZodiac('dragon')">
                    <div class="zodiac-icon">ğŸ‰</div>
                    <div class="zodiac-name">Dragon</div>
                    <div class="zodiac-dates">1964, 1976, 1988, 2000, 2012, 2024</div>
                </div>
                <div class="zodiac-card" onclick="selectZodiac('snake')">
                    <div class="zodiac-icon">ğŸ</div>
                    <div class="zodiac-name">Snake</div>
                    <div class="zodiac-dates">1965, 1977, 1989, 2001, 2013, 2025</div>
                </div>
                <div class="zodiac-card" onclick="selectZodiac('horse')">
                    <div class="zodiac-icon">ğŸ</div>
                    <div class="zodiac-name">Horse</div>
                    <div class="zodiac-dates">1966, 1978, 1990, 2002, 2014, 2026</div>
                </div>
                <div class="zodiac-card" onclick="selectZodiac('goat')">
                    <div class="zodiac-icon">ğŸ</div>
                    <div class="zodiac-name">Goat</div>
                    <div class="zodiac-dates">1967, 1979, 1991, 2003, 2015, 2027</div>
                </div>
                <div class="zodiac-card" onclick="selectZodiac('monkey')">
                    <div class="zodiac-icon">ğŸ’</div>
                    <div class="zodiac-name">Monkey</div>
                    <div class="zodiac-dates">1968, 1980, 1992, 2004, 2016, 2028</div>
                </div>
                <div class="zodiac-card" onclick="selectZodiac('rooster')">
                    <div class="zodiac-icon">ğŸ“</div>
                    <div class="zodiac-name">Rooster</div>
                    <div class="zodiac-dates">1969, 1981, 1993, 2005, 2017, 2029</div>
                </div>
                <div class="zodiac-card" onclick="selectZodiac('dog')">
                    <div class="zodiac-icon">ğŸ•</div>
                    <div class="zodiac-name">Dog</div>
                    <div class="zodiac-dates">1970, 1982, 1994, 2006, 2018, 2030</div>
                </div>
                <div class="zodiac-card" onclick="selectZodiac('pig')">
                    <div class="zodiac-icon">ğŸ–</div>
                    <div class="zodiac-name">Pig</div>
                    <div class="zodiac-dates">1971, 1983, 1995, 2007, 2019, 2031</div>
                </div>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn" onclick="startMBTITest()" id="start-mbti-btn" disabled>ğŸ§  Start MBTI Test</button>
            </div>
        </div>

        <!-- MBTI test -->
        <div id="mbti-test" class="card hidden">
            <h2 style="text-align: center; color: #3b82f6; margin-bottom: 20px;">MBTI Personality Test</h2>
            <p style="text-align: center; color: #6b7280; margin-bottom: 20px;">Choose the option that best reflects your true preference</p>
            <div id="mbti-questions"></div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn" onclick="submitMBTI()" id="submit-mbti-btn" disabled>ğŸ“Š Submit Results</button>
                <button class="btn btn-secondary" onclick="backToZodiac()" style="margin-left: 10px;">ğŸ”™ Back to Zodiac</button>
            </div>
        </div>

        <!-- Results -->
        <div id="test-result" class="card result-section hidden">
            <h2 style="text-align: center; color: #065f46; margin-bottom: 20px;">Your Zodiac Personality Analysis</h2>
            <div id="result-content"></div>
        </div>
    </div>

    <script>
        let selectedZodiac = null;
        let mbtiScores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
        let currentQuestion = 0;
        
        // MBTI questions
        const mbtiQuestions = [
            { question: "In social situations, you usually:", options: ["A. Proactively talk with others and enjoy socializing", "B. Prefer to observe quietly and socialize less proactively"] },
            { question: "When making decisions, you rely more on:", options: ["A. Logical analysis and objective facts", "B. Personal values and others' feelings"] },
            { question: "Your preferred work environment:", options: ["A. Clear plans and deadlines", "B. Flexible and adjustable at any time"] },
            { question: "When processing new information, you focus more on:", options: ["A. Concrete details and practical application", "B. Overall concepts and future possibilities"] },
            { question: "In a team, you usually:", options: ["A. Enjoy discussion and brainstorming", "B. Need time to think before speaking"] },
            { question: "You tend to:", options: ["A. Execute according to a set plan", "B. Adjust flexibly based on the situation"] },
            { question: "Preferred learning style:", options: ["A. Practice and concrete examples", "B. Theory and abstract concepts"] },
            { question: "When deciding, you value more:", options: ["A. Efficiency and outcomes", "B. Harmony and relationships"] },
            { question: "You prefer:", options: ["A. Clear rules and structure", "B. Freedom and flexibility"] },
            { question: "You are better at:", options: ["A. Handling concrete problems", "B. Thinking about abstract concepts"] },
            { question: "Under stress, you tend to:", options: ["A. Seek support and advice from others", "B. Think and handle it alone"] },
            { question: "You prefer work that:", options: ["A. Has clear success criteria", "B. Allows for innovation and exploration"] }
        ];
        
        function selectZodiac(zodiac) {
            document.querySelectorAll('.zodiac-card').forEach(card => { card.classList.remove('selected'); });
            event.target.closest('.zodiac-card').classList.add('selected');
            selectedZodiac = zodiac;
            document.getElementById('start-mbti-btn').disabled = false;
        }
        
        function startMBTITest() {
            if (!selectedZodiac) {
                alert('Please select your zodiac first!');
                return;
            }
            document.getElementById('zodiac-selection').classList.add('hidden');
            document.getElementById('mbti-test').classList.remove('hidden');
            displayMBTIQuestions();
        }
        
        function displayMBTIQuestions() {
            const questionsDiv = document.getElementById('mbti-questions');
            let questionsHTML = '';
            mbtiQuestions.forEach((q, index) => {
                questionsHTML += `
                    <div class="question-card" style="margin-bottom: 20px; padding: 20px; border: 1px solid #e5e7eb; border-radius: 12px;">
                        <h4 style="margin-bottom: 15px; color: #374151;">Question ${index + 1}</h4>
                        <p style="margin-bottom: 15px; font-size: 16px;">${q.question}</p>
                        <div class="options">
                            <label class="option" style="display: block; margin-bottom: 10px; cursor: pointer;">
                                <input type="radio" name="q${index}" value="${q.options[0].charAt(0)}" onchange="onOptionChange(this)" style="margin-right: 8px;">
                                ${q.options[0]}
                            </label>
                            <label class="option" style="display: block; margin-bottom: 10px; cursor: pointer;">
                                <input type="radio" name="q${index}" value="${q.options[1].charAt(0)}" onchange="onOptionChange(this)" style="margin-right: 8px;">
                                ${q.options[1]}
                            </label>
                        </div>
                    </div>
                `;
            });
            questionsDiv.innerHTML = questionsHTML;
        }
        
        function onOptionChange(input) {
            updateSubmitButton();
            advanceToNext(input);
        }

        function advanceToNext(input) {
            try {
                const name = input && input.name;
                if (!name || !name.startsWith('q')) return;
                const currentIndex = parseInt(name.slice(1), 10);
                if (Number.isNaN(currentIndex)) return;
                const nextIndex = currentIndex + 1;
                const next = document.querySelector(`input[name="q${nextIndex}"]`);
                if (next) {
                    const card = next.closest('.question-card');
                    if (card && typeof card.scrollIntoView === 'function') {
                        card.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                    next.focus();
                } else {
                    const submitBtn = document.getElementById('submit-mbti-btn');
                    if (submitBtn && typeof submitBtn.scrollIntoView === 'function') {
                        submitBtn.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }
            } catch (e) {
                // no-op
            }
        }

        function updateSubmitButton() {
            const answeredQuestions = document.querySelectorAll('input[type="radio"]:checked').length;
            const submitBtn = document.getElementById('submit-mbti-btn');
            submitBtn.disabled = answeredQuestions < mbtiQuestions.length;
        }
        
        async function submitMBTI() {
            mbtiScores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            mbtiQuestions.forEach((q, index) => {
                const selected = document.querySelector(`input[name="q${index}"]:checked`);
                if (selected) {
                    const value = selected.value;
                    switch(index) {
                        case 0: if (value === 'A') mbtiScores.E++; else mbtiScores.I++; break;
                        case 1: if (value === 'A') mbtiScores.T++; else mbtiScores.F++; break;
                        case 2: if (value === 'A') mbtiScores.J++; else mbtiScores.P++; break;
                        case 3: if (value === 'A') mbtiScores.S++; else mbtiScores.N++; break;
                        case 4: if (value === 'A') mbtiScores.E++; else mbtiScores.I++; break;
                        case 5: if (value === 'A') mbtiScores.J++; else mbtiScores.P++; break;
                        case 6: if (value === 'A') mbtiScores.S++; else mbtiScores.N++; break;
                        case 7: if (value === 'A') mbtiScores.T++; else mbtiScores.F++; break;
                        case 8: if (value === 'A') mbtiScores.J++; else mbtiScores.P++; break;
                        case 9: if (value === 'A') mbtiScores.S++; else mbtiScores.N++; break;
                        case 10: if (value === 'A') mbtiScores.E++; else mbtiScores.I++; break;
                        case 11: if (value === 'A') mbtiScores.J++; else mbtiScores.P++; break;
                    }
                }
            });
            const mbtiType = determineMBTIType(mbtiScores);
            const result = getZodiacMBTIAnalysis(selectedZodiac, mbtiType, mbtiScores);
            try {
                if (window.adManager && window.AD_CONFIG?.googleAdsense?.enabled) {
                    await window.adManager.createVideoAd();
                }
            } catch (e) {
                // å¿½ç•¥å¹¿å‘Šé”™è¯¯ï¼Œç»§ç»­å±•ç¤ºç»“æœ
            }
            displayResult(result);
        }
        
        function determineMBTIType(scores) {
            const first = scores.E > scores.I ? 'E' : 'I';
            const second = scores.S > scores.N ? 'S' : 'N';
            const third = scores.T > scores.F ? 'T' : 'F';
            const fourth = scores.J > scores.P ? 'J' : 'P';
            return first + second + third + fourth;
        }
        
        function backToZodiac() {
            document.getElementById('mbti-test').classList.add('hidden');
            document.getElementById('zodiac-selection').classList.remove('hidden');
        }
        
        function getZodiacAnalysis(zodiac) {
            const zodiacData = {
                rat: {
                    name: 'Rat', icon: 'ğŸ€',
                    traits: {
                        intelligence: 'Clever and quick-witted',
                        adaptability: 'Highly adaptable and resourceful',
                        ambition: 'Ambitious and success-driven',
                        sociability: 'Sociable with strong networking skills'
                    },
                    mbti: 'ENTP',
                    description: 'Rats are intelligent and agile, adept at seizing opportunities with strong adaptability and social talent.'
                },
                ox: {
                    name: 'Ox', icon: 'ğŸ‚',
                    traits: {
                        diligence: 'Hardworking and down-to-earth',
                        patience: 'Persistent with strong willpower',
                        reliability: 'Reliable and steady, trustworthy',
                        determination: 'Goal-oriented and persevering'
                    },
                    mbti: 'ISTJ',
                    description: 'Oxen are diligent and steady, highly responsible and trustworthy partners.'
                },
                tiger: {
                    name: 'Tiger', icon: 'ğŸ…',
                    traits: {
                        courage: 'Brave and willing to take on challenges',
                        leadership: 'Natural leader with strong charisma',
                        independence: 'Independent and freedom-seeking',
                        passion: 'Passionate and energetic'
                    },
                    mbti: 'ESTP',
                    description: 'Tigers are courageous and charismatic leaders with independent and passionate spirits.'
                },
                rabbit: {
                    name: 'Rabbit', icon: 'ğŸ‡',
                    traits: {
                        gentleness: 'Gentle and kind',
                        elegance: 'Graceful and composed',
                        diplomacy: 'Diplomatic and tactful',
                        creativity: 'Creative with artistic talent'
                    },
                    mbti: 'INFP',
                    description: 'Rabbits are gentle and graceful, skilled in relationships with artistic flair.'
                },
                dragon: {
                    name: 'Dragon', icon: 'ğŸ‰',
                    traits: {
                        power: 'Powerful presence and momentum',
                        charisma: 'Highly charismatic and noticeable',
                        ambition: 'Ambitious, pursuing excellence',
                        creativity: 'Imaginative and inventive'
                    },
                    mbti: 'ENTJ',
                    description: 'Dragons exude strong leadership and pursue excellence with abundant creativity.'
                },
                snake: {
                    name: 'Snake', icon: 'ğŸ',
                    traits: {
                        wisdom: 'Deep wisdom and insight',
                        intuition: 'Sharp intuition and accurate judgment',
                        mystery: 'Mysterious and hard to read',
                        determination: 'Determined and goal-focused'
                    },
                    mbti: 'INTJ',
                    description: 'Snakes are insightful and intuitive, with a mysterious and resolute personality.'
                },
                horse: {
                    name: 'Horse', icon: 'ğŸ',
                    traits: {
                        freedom: 'Loves freedom and dislikes constraints',
                        energy: 'Energetic and vigorous',
                        optimism: 'Optimistic and proactive',
                        adventure: 'Adventurous and thrill-seeking'
                    },
                    mbti: 'ENFP',
                    description: 'Horses love freedom, are energetic and optimistic, and enjoy adventure.'
                },
                goat: {
                    name: 'Goat', icon: 'ğŸ',
                    traits: {
                        kindness: 'Kind and compassionate',
                        harmony: 'Seeks harmony and avoids conflict',
                        creativity: 'Creative with artistic sense',
                        sensitivity: 'Sensitive and emotionally rich'
                    },
                    mbti: 'ISFP',
                    description: 'Goats are kind and harmonious with artistic talents and a rich inner world.'
                },
                monkey: {
                    name: 'Monkey', icon: 'ğŸ’',
                    traits: {
                        cleverness: 'Smart and quick-reacting',
                        adaptability: 'Adaptable and versatile',
                        curiosity: 'Curious and exploratory',
                        playfulness: 'Playful with a great sense of humor'
                    },
                    mbti: 'ENFP',
                    description: 'Monkeys are intelligent, adaptable, curious, and humorous.'
                },
                rooster: {
                    name: 'Rooster', icon: 'ğŸ“',
                    traits: {
                        punctuality: 'Punctual with a strong sense of time',
                        confidence: 'Confident with strong expressiveness',
                        organization: 'Organized and structured',
                        honesty: 'Honest and straightforward'
                    },
                    mbti: 'ESTJ',
                    description: 'Roosters are punctual, confident, organized, and honest.'
                },
                dog: {
                    name: 'Dog', icon: 'ğŸ•',
                    traits: {
                        loyalty: 'Loyal and dependable',
                        honesty: 'Honest and trustworthy',
                        protection: 'Protective and caring',
                        justice: 'Strong sense of justice'
                    },
                    mbti: 'ISFJ',
                    description: 'Dogs are loyal and honest, with strong protectiveness and justice.'
                },
                pig: {
                    name: 'Pig', icon: 'ğŸ–',
                    traits: {
                        kindness: 'Kind-hearted and pure',
                        generosity: 'Generous and helpful',
                        optimism: 'Optimistic and positive',
                        honesty: 'Honest and reliable'
                    },
                    mbti: 'ESFJ',
                    description: 'Pigs are kind and generous, optimistic, and reliable friends.'
                }
            };
            return zodiacData[zodiac];
        }
        
        function getZodiacMBTIAnalysis(zodiac, mbtiType, mbtiScores) {
            const zodiacData = getZodiacAnalysis(zodiac);
            const predictedMBTI = zodiacData.mbti;
            let matchAnalysis = '';
            let compatibility = '';
            if (mbtiType === predictedMBTI) {
                matchAnalysis = 'Your MBTI type highly matches your zodiac traits!';
                compatibility = 'Perfect Match';
            } else {
                let matchScore = 0;
                if (mbtiType[0] === predictedMBTI[0]) matchScore += 25;
                if (mbtiType[1] === predictedMBTI[1]) matchScore += 25;
                if (mbtiType[2] === predictedMBTI[2]) matchScore += 25;
                if (mbtiType[3] === predictedMBTI[3]) matchScore += 25;
                if (matchScore >= 75) {
                    matchAnalysis = 'Your MBTI type fairly matches your zodiac traits!';
                    compatibility = 'High Match';
                } else if (matchScore >= 50) {
                    matchAnalysis = 'There is some match between your MBTI and zodiac traits!';
                    compatibility = 'Moderate Match';
                } else {
                    matchAnalysis = 'Your MBTI and zodiac traits differ â€” a unique combination!';
                    compatibility = 'Unique Combo';
                }
            }
            return { ...zodiacData, userMBTI: mbtiType, predictedMBTI, matchAnalysis, compatibility, mbtiScores };
        }
        
        function displayResult(zodiacData) {
            const resultContent = document.getElementById('result-content');
            let resultHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <div class="kpi">${zodiacData.icon} ${zodiacData.name}</div>
                    <p class="muted">Zodiac Ã— MBTI Fusion Personality Analysis</p>
                </div>
                <div class="grid">
                    <div class="card mbti-section">
                        <h4>ğŸ­ Your MBTI Type</h4>
                        <div style="text-align: center; margin: 20px 0;">
                            <div style="font-size: 24px; font-weight: 700; color: #3b82f6;">${zodiacData.userMBTI}</div>
                        </div>
                        <p>Based on your actual MBTI test result</p>
                    </div>
                    <div class="card mbti-section">
                        <h4>ğŸ”® Zodiac-Predicted MBTI</h4>
                        <div style="text-align: center; margin: 20px 0;">
                            <div style="font-size: 24px; font-weight: 700; color: #3b82f6;">${zodiacData.predictedMBTI}</div>
                        </div>
                        <p>Estimated from typical zodiac traits</p>
                    </div>
                </div>
                <div class="card" style="background: linear-gradient(135deg, #fef3c7, #fde68a); border-left: 4px solid #f59e0b;">
                    <h4>ğŸ¯ Match Analysis</h4>
                    <div style="text-align: center; margin: 15px 0;">
                        <div style="font-size: 20px; font-weight: 700; color: #92400e;">${zodiacData.compatibility}</div>
                    </div>
                    <p style="text-align: center; color: #92400e;">${zodiacData.matchAnalysis}</p>
                </div>
                <div class="grid">
                    <div class="card">
                        <h4>ğŸŒŸ Core Zodiac Traits</h4>
                        ${Object.entries(zodiacData.traits).map(([key, value]) => `
                            <div class="personality-trait">
                                <div class="trait-title">${getTraitTitle(key)}</div>
                                <div class="trait-desc">${value}</div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="card">
                        <h4>ğŸ“Š MBTI Dimension Scores</h4>
                        <p><strong>Extraversion (E):</strong> ${zodiacData.mbtiScores.E} | <strong>Introversion (I):</strong> ${zodiacData.mbtiScores.I}</p>
                        <p><strong>Sensing (S):</strong> ${zodiacData.mbtiScores.S} | <strong>Intuition (N):</strong> ${zodiacData.mbtiScores.N}</p>
                        <p><strong>Thinking (T):</strong> ${zodiacData.mbtiScores.T} | <strong>Feeling (F):</strong> ${zodiacData.mbtiScores.F}</p>
                        <p><strong>Judging (J):</strong> ${zodiacData.mbtiScores.J} | <strong>Perceiving (P):</strong> ${zodiacData.mbtiScores.P}</p>
                    </div>
                </div>
                <div class="card" style="margin-top: 20px;">
                    <h4>ğŸ’¡ Fusion Summary</h4>
                    <p>${zodiacData.description}</p>
                    <p style="margin-top: 15px; color: #6b7280; font-size: 14px;">
                        Your personality blends traditional zodiac characteristics with modern MBTI psychology for a more holistic view of who you are.
                    </p>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" onclick="resetTest()">ğŸ”„ Retake Test</button>
                    <button class="btn back-btn" onclick="location.href='index.html'">ğŸ  Back to Home</button>
                </div>
            `;
            resultContent.innerHTML = resultHTML;
            document.getElementById('mbti-test').classList.add('hidden');
            document.getElementById('test-result').classList.remove('hidden');
        }
        
        function getTraitTitle(key) {
            const titles = {
                intelligence: 'Intelligence',
                adaptability: 'Adaptability',
                ambition: 'Ambition',
                sociability: 'Sociability',
                diligence: 'Diligence',
                patience: 'Patience',
                reliability: 'Reliability',
                determination: 'Determination',
                courage: 'Courage',
                leadership: 'Leadership',
                independence: 'Independence',
                passion: 'Passion',
                gentleness: 'Gentleness',
                elegance: 'Elegance',
                diplomacy: 'Diplomacy',
                creativity: 'Creativity',
                power: 'Power',
                charisma: 'Charisma',
                wisdom: 'Wisdom',
                intuition: 'Intuition',
                mystery: 'Mystery',
                freedom: 'Freedom',
                energy: 'Energy',
                optimism: 'Optimism',
                adventure: 'Adventure',
                kindness: 'Kindness',
                harmony: 'Harmony',
                sensitivity: 'Sensitivity',
                cleverness: 'Cleverness',
                curiosity: 'Curiosity',
                playfulness: 'Playfulness',
                punctuality: 'Punctuality',
                confidence: 'Confidence',
                organization: 'Organization',
                honesty: 'Honesty',
                loyalty: 'Loyalty',
                protection: 'Protectiveness',
                justice: 'Sense of Justice',
                generosity: 'Generosity'
            };
            return titles[key] || key;
        }
        
        function resetTest() {
            selectedZodiac = null;
            mbtiScores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            currentQuestion = 0;
            document.querySelectorAll('.zodiac-card').forEach(card => { card.classList.remove('selected'); });
            document.querySelectorAll('input[type="radio"]').forEach(radio => { radio.checked = false; });
            document.getElementById('start-mbti-btn').disabled = true;
            document.getElementById('submit-mbti-btn').disabled = true;
            document.getElementById('zodiac-selection').classList.remove('hidden');
            document.getElementById('mbti-test').classList.add('hidden');
            document.getElementById('test-result').classList.add('hidden');
        }
        
        function startTest() {
            document.getElementById('zodiac-selection').scrollIntoView({ behavior: 'smooth' });
            const zodiacSelection = document.getElementById('zodiac-selection');
            zodiacSelection.style.transform = 'scale(1.02)';
            zodiacSelection.style.boxShadow = '0 25px 50px rgba(245, 158, 11, 0.3)';
            setTimeout(() => {
                zodiacSelection.style.transform = 'scale(1)';
                zodiacSelection.style.boxShadow = '0 20px 40px rgba(0,0,0,0.15)';
            }, 2000);
            showToast('Please choose your zodiac to begin!', 'info');
            highlightZodiacSelection();
        }
        
        function highlightZodiacSelection() {
            const zodiacCards = document.querySelectorAll('.zodiac-card');
            zodiacCards.forEach((card, index) => {
                setTimeout(() => {
                    card.style.animation = 'pulse 1s ease-in-out';
                    card.style.border = '3px solid #f59e0b';
                    setTimeout(() => {
                        card.style.animation = '';
                        card.style.border = '2px solid #f59e0b';
                    }, 1000);
                }, index * 200);
            });
        }
        
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'info' ? '#3b82f6' : '#10b981'};
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 1000;
                font-size: 14px;
                max-width: 300px;
            `;
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => { toast.remove(); }, 3000);
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Chinese Zodiac test loaded');
        });
    </script>
    <script src="ad-config.js"></script>
    <script src="ads-manager.js"></script>
    <script>
        // ä¾¿æ·å·¥å…·ï¼šæ¸…é™¤åŒæ„çŠ¶æ€å¹¶é‡æ–°æ˜¾ç¤ºåŒæ„æ¡
        window.resetAdConsent = function() {
            try {
                localStorage.removeItem('adsConsent');
                // é‡æ–°åˆå§‹åŒ–åŒæ„æ¡
                if (window.adManager) {
                    // åˆ›å»ºä¸€ä¸ªè½»é‡æç¤º
                    console.log('Consent cleared. Reloading banner...');
                    // ç®€å•é‡æ–°åŠ è½½é¡µé¢ä»¥è§¦å‘ banner
                    location.reload();
                }
            } catch (e) {}
        };
    </script>
</body>
</html>
