<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›½é™…åŒ–æµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .language-switcher {
            text-align: center;
            margin: 20px 0;
        }
        .lang-tabs {
            display: inline-flex;
            background: #e0e0e0;
            border-radius: 25px;
            padding: 4px;
        }
        .lang-tab {
            background: transparent;
            border: none;
            padding: 8px 16px;
            margin: 0 2px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .lang-tab.active {
            background: #007bff;
            color: white;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-section h3 {
            color: #333;
            margin-top: 0;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .debug-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 data-i18n="main.title">å›½é™…åŒ–æµ‹è¯•é¡µé¢</h1>
        <p data-i18n="main.subtitle">è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å›½é™…åŒ–åŠŸèƒ½çš„ç®€å•é¡µé¢</p>
        
        <div class="language-switcher">
            <div class="lang-tabs">
                <button class="lang-tab active" onclick="switchLanguage('zh')" data-lang="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</button>
                <button class="lang-tab" onclick="switchLanguage('en')" data-lang="en">ğŸ‡ºğŸ‡¸ English</button>
            </div>
        </div>
        
        <div class="test-section">
            <h3 data-i18n="test.section1.title">æµ‹è¯•åŒºåŸŸ1</h3>
            <p data-i18n="test.section1.content">è¿™æ˜¯ç¬¬ä¸€ä¸ªæµ‹è¯•åŒºåŸŸçš„å†…å®¹ï¼Œç”¨äºéªŒè¯ç¿»è¯‘æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p>
            <button data-i18n="test.section1.button">æµ‹è¯•æŒ‰é’®</button>
        </div>
        
        <div class="test-section">
            <h3 data-i18n="test.section2.title">æµ‹è¯•åŒºåŸŸ2</h3>
            <p data-i18n="test.section2.content">è¿™æ˜¯ç¬¬äºŒä¸ªæµ‹è¯•åŒºåŸŸçš„å†…å®¹ï¼ŒåŒ…å«æ›´å¤šçš„æµ‹è¯•å…ƒç´ ã€‚</p>
            <button data-i18n="test.section2.button">å¦ä¸€ä¸ªæŒ‰é’®</button>
        </div>
        
        <div class="debug-info">
            <h4>è°ƒè¯•ä¿¡æ¯</h4>
            <div id="debugContent">ç­‰å¾…é¡µé¢åŠ è½½...</div>
        </div>
        
        <div style="text-align: center; margin-top: 30px;">
            <button onclick="testTranslation()">æµ‹è¯•ç¿»è¯‘åŠŸèƒ½</button>
            <button onclick="showDebugInfo()">æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯</button>
            <button onclick="resetLanguage()">é‡ç½®è¯­è¨€</button>
        </div>
    </div>

    <script>
        // å›½é™…åŒ–é…ç½®
        const TRANSLATIONS = {
            zh: {
                main: {
                    title: "å›½é™…åŒ–æµ‹è¯•é¡µé¢",
                    subtitle: "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å›½é™…åŒ–åŠŸèƒ½çš„ç®€å•é¡µé¢"
                },
                test: {
                    section1: {
                        title: "æµ‹è¯•åŒºåŸŸ1",
                        content: "è¿™æ˜¯ç¬¬ä¸€ä¸ªæµ‹è¯•åŒºåŸŸçš„å†…å®¹ï¼Œç”¨äºéªŒè¯ç¿»è¯‘æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚",
                        button: "æµ‹è¯•æŒ‰é’®"
                    },
                    section2: {
                        title: "æµ‹è¯•åŒºåŸŸ2",
                        content: "è¿™æ˜¯ç¬¬äºŒä¸ªæµ‹è¯•åŒºåŸŸçš„å†…å®¹ï¼ŒåŒ…å«æ›´å¤šçš„æµ‹è¯•å…ƒç´ ã€‚",
                        button: "å¦ä¸€ä¸ªæŒ‰é’®"
                    }
                }
            },
            en: {
                main: {
                    title: "Internationalization Test Page",
                    subtitle: "This is a simple page to test internationalization functionality"
                },
                test: {
                    section1: {
                        title: "Test Section 1",
                        content: "This is the content of the first test section, used to verify that translation is working properly.",
                        button: "Test Button"
                    },
                    section2: {
                        title: "Test Section 2",
                        content: "This is the content of the second test section, containing more test elements.",
                        button: "Another Button"
                    }
                }
            }
        };
        
        let currentLanguage = 'zh';
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.addEventListener('load', () => {
            console.log('é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–...');
            initializeLanguage();
            updateDebugInfo();
        });
        
        // åˆå§‹åŒ–è¯­è¨€è®¾ç½®
        function initializeLanguage() {
            const savedLang = localStorage.getItem('test_language');
            if (savedLang && TRANSLATIONS[savedLang]) {
                currentLanguage = savedLang;
            } else {
                currentLanguage = 'zh';
            }
            
            updateLanguageButtons();
            applyLanguage();
            console.log('è¯­è¨€åˆå§‹åŒ–å®Œæˆ:', currentLanguage);
        }
        
        // åˆ‡æ¢è¯­è¨€
        function switchLanguage(lang) {
            console.log('å°è¯•åˆ‡æ¢è¯­è¨€åˆ°:', lang);
            
            if (TRANSLATIONS[lang]) {
                currentLanguage = lang;
                localStorage.setItem('test_language', lang);
                
                updateLanguageButtons();
                applyLanguage();
                updateDebugInfo();
                
                console.log(`è¯­è¨€å·²åˆ‡æ¢åˆ°: ${lang}`);
                alert(`è¯­è¨€å·²åˆ‡æ¢åˆ°${lang === 'zh' ? 'ä¸­æ–‡' : 'English'}`);
            } else {
                console.error(`ä¸æ”¯æŒçš„è¯­è¨€: ${lang}`);
                alert(`ä¸æ”¯æŒçš„è¯­è¨€: ${lang}`);
            }
        }
        
        // æ›´æ–°è¯­è¨€æŒ‰é’®çŠ¶æ€
        function updateLanguageButtons() {
            document.querySelectorAll('.lang-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-lang="${currentLanguage}"]`).classList.add('active');
        }
        
        // åº”ç”¨è¯­è¨€
        function applyLanguage() {
            console.log('å¼€å§‹åº”ç”¨è¯­è¨€:', currentLanguage);
            const elements = document.querySelectorAll('[data-i18n]');
            console.log('æ‰¾åˆ°éœ€è¦ç¿»è¯‘çš„å…ƒç´ æ•°é‡:', elements.length);
            
            elements.forEach(element => {
                const key = element.getAttribute('data-i18n');
                const translation = getTranslation(key);
                console.log(`ç¿»è¯‘é”®: ${key}, ç¿»è¯‘ç»“æœ:`, translation);
                if (translation) {
                    element.textContent = translation;
                }
            });
            
            // æ›´æ–°é¡µé¢æ ‡é¢˜
            const pageTitle = getTranslation('main.title');
            if (pageTitle) {
                document.title = pageTitle;
            }
            
            console.log('è¯­è¨€åº”ç”¨å®Œæˆ');
        }
        
        // è·å–ç¿»è¯‘
        function getTranslation(key) {
            const keys = key.split('.');
            let value = TRANSLATIONS[currentLanguage];
            
            for (const k of keys) {
                if (value && value[k]) {
                    value = value[k];
                } else {
                    return null;
                }
            }
            
            return value;
        }
        
        // æµ‹è¯•ç¿»è¯‘åŠŸèƒ½
        function testTranslation() {
            const testKey = 'test.section1.title';
            const translation = getTranslation(testKey);
            alert(`æµ‹è¯•ç¿»è¯‘é”® "${testKey}":\nå½“å‰è¯­è¨€: ${currentLanguage}\nç¿»è¯‘ç»“æœ: ${translation}`);
        }
        
        // æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯
        function showDebugInfo() {
            updateDebugInfo();
        }
        
        // æ›´æ–°è°ƒè¯•ä¿¡æ¯
        function updateDebugInfo() {
            const debugContent = document.getElementById('debugContent');
            debugContent.innerHTML = `
                <strong>å½“å‰è¯­è¨€:</strong> ${currentLanguage}<br>
                <strong>å¯ç”¨è¯­è¨€:</strong> ${Object.keys(TRANSLATIONS).join(', ')}<br>
                <strong>æœ¬åœ°å­˜å‚¨:</strong> ${localStorage.getItem('test_language') || 'æœªè®¾ç½®'}<br>
                <strong>é¡µé¢æ ‡é¢˜:</strong> ${document.title}<br>
                <strong>ç¿»è¯‘å…ƒç´ æ•°é‡:</strong> ${document.querySelectorAll('[data-i18n]').length}<br>
                <strong>TRANSLATIONSå¯¹è±¡:</strong> ${JSON.stringify(TRANSLATIONS, null, 2)}
            `;
        }
        
        // é‡ç½®è¯­è¨€
        function resetLanguage() {
            localStorage.removeItem('test_language');
            currentLanguage = 'zh';
            updateLanguageButtons();
            applyLanguage();
            updateDebugInfo();
            alert('è¯­è¨€è®¾ç½®å·²é‡ç½®ä¸ºä¸­æ–‡');
        }
    </script>
</body>
</html>
