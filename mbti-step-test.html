<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBTI Step-by-Step Test - é€é¢˜è·³è½¬æµ‹è¯•</title>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4198974976257818"
         crossorigin="anonymous"></script>
    
    <!-- å¼•å…¥å¹¿å‘Šé…ç½®æ–‡ä»¶ -->
    <script src="ad-config.js"></script>
    <script src="ads-manager.js"></script>
    
    <style>
        * { box-sizing: border-box; }
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }
        .container { max-width: 800px; margin: 0 auto; padding: 24px; }
        .header { text-align: center; color: #fff; margin: 24px 0; }
        .header h1 { margin: 0 0 8px; font-size: 32px; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
        
        .card { 
            background: rgba(255,255,255,0.95); 
            border-radius: 20px; 
            padding: 30px; 
            box-shadow: 0 8px 32px rgba(0,0,0,0.3); 
            margin-bottom: 20px; 
            border: 1px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
        }
        
        .btn { 
            display:inline-block; 
            background: linear-gradient(135deg, #667eea, #764ba2); 
            color:#fff; 
            border:none; 
            padding:12px 24px; 
            border-radius:25px; 
            cursor:pointer; 
            font-weight:600; 
            font-size: 14px;
            transition: all 0.3s ease;
            margin: 5px;
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4); }
        .btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
        .btn-secondary { background: linear-gradient(135deg, #4a5568, #2d3748); }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(0,0,0,0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .question-container {
            background: #f8f9fa;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
            min-height: 300px;
        }
        
        .question-container h3 {
            margin-bottom: 20px;
            color: #333;
            font-size: 1.3rem;
        }
        
        .question-container p {
            margin-bottom: 25px;
            color: #555;
            line-height: 1.6;
            font-size: 1.1rem;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .option {
            display: flex;
            align-items: center;
            padding: 18px;
            background: white;
            border-radius: 12px;
            border: 2px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .option:hover {
            border-color: #667eea;
            background: #f8f9ff;
            transform: translateY(-2px);
        }
        
        .option input[type="radio"] {
            margin-right: 15px;
            transform: scale(1.3);
        }
        
        .option.selected {
            border-color: #667eea;
            background: #e8f0fe;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .test-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }
        
        .test-navigation .btn {
            min-width: 140px;
        }
        
        .result {
            text-align: center;
            padding: 40px;
            background: #f8f9fa;
            border-radius: 20px;
            margin-top: 20px;
        }
        .result h2 { color: #333; margin-bottom: 20px; }
        .result p { font-size: 18px; line-height: 1.6; color: #555; }
        
        .hidden { display: none; }
        
        /* å¹¿å‘Šå®¹å™¨æ ·å¼ */
        .ad-container {
            margin: 20px 0;
            text-align: center;
            border-radius: 12px;
            overflow: hidden;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .ad-container.native-ad {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            border: 1px solid rgba(102, 126, 234, 0.3);
        }
        
        .ad-container.sidebar-ad {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 300px;
            z-index: 1000;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .ad-container.sidebar-ad {
                position: static;
                width: 100%;
                margin: 20px 0;
            }
            .container { padding: 16px; }
            .test-navigation {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>ğŸ§  MBTI é€é¢˜è·³è½¬æµ‹è¯•</h1>
            <p>é€‰æ‹©ä¸€é¢˜åè‡ªåŠ¨è·³è½¬åˆ°ä¸‹ä¸€é¢˜ï¼Œæ›´å¥½çš„ç”¨æˆ·ä½“éªŒ</p>
        </div>
    </div>

    <div class="container">
        <!-- æµ‹è¯•å¼€å§‹é¡µé¢ -->
        <div id="start-page" class="card">
            <h2 style="text-align: center; color: #3b82f6; margin-bottom: 20px;">MBTI Personality Test</h2>
            <p style="text-align: center; color: #6b7280; margin-bottom: 20px;">Please choose the option that best matches your true thoughts</p>
            <ul style="text-align: left; color: #6b7280;">
                <li>âœ… é€é¢˜æ˜¾ç¤ºï¼Œä¸“æ³¨ä½“éªŒ</li>
                <li>âœ… é€‰æ‹©åè‡ªåŠ¨è·³è½¬</li>
                <li>âœ… æ™ºèƒ½å¹¿å‘Šæ’å…¥</li>
                <li>âœ… å®æ—¶è¿›åº¦æ˜¾ç¤º</li>
                <li>âœ… ä¸“ä¸šåˆ†ææŠ¥å‘Š</li>
            </ul>
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn" onclick="startTest()">å¼€å§‹æµ‹è¯•</button>
            </div>
        </div>

        <!-- æµ‹è¯•è¿›è¡Œé¡µé¢ -->
        <div id="test-page" class="card hidden">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            
            <!-- å½“å‰é¢˜ç›®æ˜¾ç¤ºåŒºåŸŸ -->
            <div id="currentQuestion" class="question-container">
                <!-- é¢˜ç›®å°†åœ¨è¿™é‡ŒåŠ¨æ€æ˜¾ç¤º -->
            </div>
            
            <!-- å¹¿å‘Šå®¹å™¨ -->
            <div id="ad-container" class="ad-container native-ad" style="display: none;">
                <!-- å¹¿å‘Šå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </div>
            
            <!-- å¯¼èˆªæŒ‰é’® -->
            <div class="test-navigation">
                <button class="btn btn-secondary" onclick="goBack()">ä¸Šä¸€é¢˜</button>
                <button class="btn" onclick="nextQuestion()" id="nextBtn" disabled>ä¸‹ä¸€é¢˜</button>
            </div>
        </div>

        <!-- ç»“æœé¡µé¢ -->
        <div id="result-page" class="card hidden">
            <div class="result">
                <h2>ğŸ‰ æµ‹è¯•å®Œæˆï¼</h2>
                <p>ä½ çš„MBTIç±»å‹æ˜¯ï¼š<strong id="result-type">INTJ</strong></p>
                <p id="result-description">ä½ æ˜¯ä¸€ä¸ªå¯Œæœ‰æƒ³è±¡åŠ›å’Œæˆ˜ç•¥æ€§çš„æ€æƒ³å®¶ï¼Œä¸€åˆ‡çš†åœ¨è®¡åˆ’ä¹‹ä¸­ã€‚</p>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" onclick="restartTest()">é‡æ–°æµ‹è¯•</button>
                    <button class="btn btn-secondary" onclick="backToZodiac()" style="margin-left: 10px;">è¿”å›é¦–é¡µ</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // æµ‹è¯•æ•°æ® - åŸºäºä½ æä¾›çš„12ä¸ªé¢˜ç›®
        const testQuestions = [
            {
                question: "In social situations, you usually:",
                options: [
                    { text: "A. Actively talk to others and enjoy socializing", value: 'E', category: 'EI' },
                    { text: "B. Tend to observe quietly and socialize less actively", value: 'I', category: 'EI' }
                ]
            },
            {
                question: "When you need to make decisions, you rely more on:",
                options: [
                    { text: "A. Logical analysis and objective facts", value: 'T', category: 'TF' },
                    { text: "B. Personal values and others' feelings", value: 'F', category: 'TF' }
                ]
            },
            {
                question: "You prefer work environments that are:",
                options: [
                    { text: "A. Have clear plans and deadlines", value: 'J', category: 'JP' },
                    { text: "B. Flexible and can be adjusted anytime", value: 'P', category: 'JP' }
                ]
            },
            {
                question: "When facing new information, you focus more on:",
                options: [
                    { text: "A. Specific details and practical applications", value: 'S', category: 'SN' },
                    { text: "B. Overall concepts and future possibilities", value: 'N', category: 'SN' }
                ]
            },
            {
                question: "In a team, you usually:",
                options: [
                    { text: "A. Like discussions and brainstorming", value: 'E', category: 'EI' },
                    { text: "B. Need time to think before expressing", value: 'I', category: 'EI' }
                ]
            },
            {
                question: "You tend to:",
                options: [
                    { text: "A. Execute according to established plans", value: 'J', category: 'JP' },
                    { text: "B. Adjust flexibly based on situations", value: 'P', category: 'JP' }
                ]
            },
            {
                question: "You prefer learning through:",
                options: [
                    { text: "A. Practice and concrete examples", value: 'S', category: 'SN' },
                    { text: "B. Theory and abstract concepts", value: 'N', category: 'SN' }
                ]
            },
            {
                question: "When making decisions, you value more:",
                options: [
                    { text: "A. Efficiency and results", value: 'T', category: 'TF' },
                    { text: "B. Harmony and interpersonal relationships", value: 'F', category: 'TF' }
                ]
            },
            {
                question: "You prefer:",
                options: [
                    { text: "A. Clear rules and structure", value: 'J', category: 'JP' },
                    { text: "B. Freedom and flexibility", value: 'P', category: 'JP' }
                ]
            },
            {
                question: "You are better at:",
                options: [
                    { text: "A. Handling concrete problems", value: 'S', category: 'SN' },
                    { text: "B. Thinking about abstract concepts", value: 'N', category: 'SN' }
                ]
            },
            {
                question: "Under pressure, you tend to:",
                options: [
                    { text: "A. Seek support and advice from others", value: 'F', category: 'TF' },
                    { text: "B. Think and handle things alone", value: 'T', category: 'TF' }
                ]
            },
            {
                question: "You prefer work that:",
                options: [
                    { text: "A. Has clear success criteria", value: 'J', category: 'JP' },
                    { text: "B. Has innovation and exploration space", value: 'P', category: 'JP' }
                ]
            }
        ];

        let currentQuestion = 0;
        let answers = {};
        let testStarted = false;

        // å¼€å§‹æµ‹è¯•
        function startTest() {
            document.getElementById('start-page').classList.add('hidden');
            document.getElementById('test-page').classList.remove('hidden');
            testStarted = true;
            
            // æ˜¾ç¤ºä¾§è¾¹æ å¹¿å‘Š
            if (window.adManager) {
                window.adManager.createSidebarAd();
            }
            
            showCurrentQuestion();
        }

        // æ˜¾ç¤ºå½“å‰é¢˜ç›®
        function showCurrentQuestion() {
            const question = testQuestions[currentQuestion];
            const container = document.getElementById('currentQuestion');
            
            container.innerHTML = `
                <h3>Question ${currentQuestion + 1} of ${testQuestions.length}</h3>
                <p>${question.question}</p>
                <div class="options">
                    ${question.options.map((option, index) => `
                        <label class="option" onclick="selectOption('${option.value}', '${option.category}')">
                            <input type="radio" name="q${currentQuestion}" value="${option.value}" 
                                   ${answers[option.category] === option.value ? 'checked' : ''}>
                            ${option.text}
                        </label>
                    `).join('')}
                </div>
            `;
            
            // æ›´æ–°è¿›åº¦æ¡
            updateProgress();
            
            // æ£€æŸ¥æ˜¯å¦éœ€è¦åœ¨é¢˜ç›®é—´æ’å…¥å¹¿å‘Š
            if (window.adManager && currentQuestion > 0 && currentQuestion % 3 === 0) {
                showAd();
            }
        }

        // é€‰æ‹©é€‰é¡¹ - é€‰æ‹©åè‡ªåŠ¨è·³è½¬
        function selectOption(value, category) {
            answers[category] = value;
            
            // æ›´æ–°UIé€‰ä¸­çŠ¶æ€
            document.querySelectorAll('#currentQuestion .option').forEach(opt => {
                opt.classList.remove('selected');
            });
            event.target.closest('.option').classList.add('selected');
            
            // è‡ªåŠ¨è·³è½¬åˆ°ä¸‹ä¸€é¢˜ï¼ˆå»¶è¿Ÿ1ç§’è®©ç”¨æˆ·çœ‹åˆ°é€‰æ‹©ï¼‰
            setTimeout(() => {
                if (currentQuestion < testQuestions.length - 1) {
                    currentQuestion++;
                    showCurrentQuestion();
                } else {
                    finishTest();
                }
            }, 1000);
        }

        // ä¸‹ä¸€é¢˜ï¼ˆæ‰‹åŠ¨æŒ‰é’®ï¼‰
        function nextQuestion() {
            if (currentQuestion < testQuestions.length - 1) {
                currentQuestion++;
                showCurrentQuestion();
            } else {
                finishTest();
            }
        }

        // ä¸Šä¸€é¢˜
        function goBack() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showCurrentQuestion();
            }
        }

        // å®Œæˆæµ‹è¯•
        function finishTest() {
            // æ˜¾ç¤ºè§†é¢‘å¹¿å‘Š
            if (window.adManager) {
                window.adManager.createVideoAd().then(() => {
                    showResult();
                });
            } else {
                showResult();
            }
        }

        // æ˜¾ç¤ºç»“æœ
        function showResult() {
            document.getElementById('test-page').classList.add('hidden');
            document.getElementById('result-page').classList.remove('hidden');
            
            // è®¡ç®—MBTIç±»å‹
            const mbtiType = calculateMBTI();
            document.getElementById('result-type').textContent = mbtiType;
            document.getElementById('result-description').textContent = getMBTIDescription(mbtiType);
            
            // æ˜¾ç¤ºç»“æœé¡µå¹¿å‘Š
            if (window.adManager) {
                window.adManager.showResultPageAds();
            }
        }

        // è®¡ç®—MBTIç±»å‹
        function calculateMBTI() {
            const types = ['E', 'I', 'S', 'N', 'T', 'F', 'J', 'P'];
            let result = '';
            
            for (let i = 0; i < types.length; i += 2) {
                const type1 = types[i];
                const type2 = types[i + 1];
                result += answers[type1 + type2] || type1;
            }
            
            return result;
        }

        // è·å–MBTIæè¿°
        function getMBTIDescription(type) {
            const descriptions = {
                'INTJ': 'ä½ æ˜¯ä¸€ä¸ªå¯Œæœ‰æƒ³è±¡åŠ›å’Œæˆ˜ç•¥æ€§çš„æ€æƒ³å®¶ï¼Œä¸€åˆ‡çš†åœ¨è®¡åˆ’ä¹‹ä¸­ã€‚',
                'INTP': 'ä½ æ˜¯ä¸€ä¸ªå…·æœ‰åˆ›æ–°ç²¾ç¥çš„å‘æ˜å®¶ï¼Œå¯¹çŸ¥è¯†æœ‰ç€æ­¢ä¸ä½çš„æ¸´æœ›ã€‚',
                'ENTJ': 'ä½ æ˜¯ä¸€ä¸ªå¤§èƒ†çš„ã€å¯Œæœ‰æƒ³è±¡åŠ›çš„ã€æ„å¿—åšå¼ºçš„é¢†å¯¼è€…ã€‚',
                'ENTP': 'ä½ æ˜¯ä¸€ä¸ªèªæ˜å¥½å¥‡çš„æ€æƒ³å®¶ï¼Œä¸ä¼šæ”¾å¼ƒä»»ä½•æ™ºåŠ›æŒ‘æˆ˜ã€‚',
                'INFJ': 'ä½ æ˜¯ä¸€ä¸ªå®‰é™è€Œç¥ç§˜çš„äººï¼ŒåŒæ—¶é¼“èˆäººå¿ƒä¸”ä¸çŸ¥ç–²å€¦çš„ç†æƒ³ä¸»ä¹‰è€…ã€‚',
                'INFP': 'ä½ æ˜¯ä¸€ä¸ªå¯Œæœ‰è¯—æ„ã€å–„è‰¯ä¸”åˆ©ä»–ä¸»ä¹‰çš„äººï¼Œæ€»æ˜¯çƒ­åˆ‡åœ°æƒ³è¦å¸®åŠ©æ­£å½“ç†ç”±ã€‚',
                'ENFJ': 'ä½ æ˜¯ä¸€ä¸ªå¯Œæœ‰é­…åŠ›ã€é¼“èˆäººå¿ƒçš„é¢†å¯¼è€…ï¼Œæœ‰ç€è¿·äººçš„é­…åŠ›ã€‚',
                'ENFP': 'ä½ æ˜¯ä¸€ä¸ªçƒ­æƒ…ã€æœ‰åˆ›é€ åŠ›ã€ç¤¾äº¤èƒ½åŠ›å¼ºã€è‡ªç”±å¥”æ”¾çš„äººã€‚',
                'ISTJ': 'ä½ æ˜¯ä¸€ä¸ªå®ç”¨ä¸”æ³¨é‡äº‹å®çš„äººï¼Œå¯é æ€§æ¯‹åº¸ç½®ç–‘ã€‚',
                'ISFJ': 'ä½ æ˜¯ä¸€ä¸ªéå¸¸ä¸“æ³¨å’Œæ¸©æš–çš„å®ˆæŠ¤è€…ï¼Œæ—¶åˆ»å‡†å¤‡ç€ä¿æŠ¤çˆ±ç€çš„äººä»¬ã€‚',
                'ESTJ': 'ä½ æ˜¯ä¸€ä¸ªå‡ºè‰²çš„ç®¡ç†è€…ï¼Œåœ¨ç®¡ç†äº‹æƒ…æˆ–äººå‘˜æ–¹é¢æ— ä¸ä¼¦æ¯”ã€‚',
                'ESFJ': 'ä½ æ˜¯ä¸€ä¸ªææœ‰åŒæƒ…å¿ƒã€çˆ±ç¤¾äº¤ã€å—æ¬¢è¿çš„äººï¼Œæ€»æ˜¯çƒ­å¿ƒå¸®åŠ©ä»–äººã€‚',
                'ISTP': 'ä½ æ˜¯ä¸€ä¸ªå¤§èƒ†è€Œå®é™…çš„å®éªŒå®¶ï¼Œæ“…é•¿ä½¿ç”¨å„ç§å·¥å…·ã€‚',
                'ISFP': 'ä½ æ˜¯ä¸€ä¸ªçµæ´»æœ‰é­…åŠ›çš„è‰ºæœ¯å®¶ï¼Œæ—¶åˆ»å‡†å¤‡ç€æ¢ç´¢æ–°çš„å¯èƒ½æ€§ã€‚',
                'ESTP': 'ä½ æ˜¯ä¸€ä¸ªèªæ˜ã€ç²¾åŠ›å……æ²›ã€å–„äºæ„ŸçŸ¥çš„äººï¼ŒçœŸæ­£äº«å—ç”Ÿæ´»ã€‚',
                'ESFP': 'ä½ æ˜¯ä¸€ä¸ªè‡ªå‘çš„ã€ç²¾åŠ›å……æ²›ã€çƒ­æƒ…çš„äººï¼Œä»ä¸æŠŠç”Ÿæ´»çœ‹å¾—å¤ªè®¤çœŸã€‚'
            };
            return descriptions[type] || 'ä½ æ˜¯ä¸€ä¸ªç‹¬ç‰¹çš„äººï¼Œæœ‰ç€è‡ªå·±çš„æ€§æ ¼ç‰¹ç‚¹ã€‚';
        }

        // æ˜¾ç¤ºå¹¿å‘Š
        function showAd() {
            const adContainer = document.getElementById('ad-container');
            if (adContainer && window.adManager) {
                adContainer.style.display = 'block';
                window.adManager.createNativeAd('ad-container');
                
                // 5ç§’åéšè—å¹¿å‘Š
                setTimeout(() => {
                    adContainer.style.display = 'none';
                }, 5000);
            }
        }

        // æ›´æ–°è¿›åº¦
        function updateProgress() {
            const progress = ((currentQuestion + 1) / testQuestions.length) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
        }

        // é‡æ–°å¼€å§‹æµ‹è¯•
        function restartTest() {
            currentQuestion = 0;
            answers = {};
            testStarted = false;
            
            document.getElementById('result-page').classList.add('hidden');
            document.getElementById('start-page').classList.remove('hidden');
            
            // ç§»é™¤å¹¿å‘Š
            const sidebarAd = document.getElementById('sidebar-ad');
            if (sidebarAd) sidebarAd.remove();
        }

        // è¿”å›é¦–é¡µ
        function backToZodiac() {
            window.location.href = 'index.html';
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('MBTIé€é¢˜è·³è½¬æµ‹è¯•é¡µé¢å·²åŠ è½½');
            
            // æ£€æŸ¥å¹¿å‘Šç®¡ç†å™¨æ˜¯å¦å¯ç”¨
            if (window.adManager) {
                console.log('å¹¿å‘Šç®¡ç†å™¨å·²åˆå§‹åŒ–');
            } else {
                console.warn('å¹¿å‘Šç®¡ç†å™¨æœªåˆå§‹åŒ–');
            }
        });
    </script>
</body>
</html>
