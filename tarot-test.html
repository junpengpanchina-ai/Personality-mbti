<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”® å¡”ç½—ç‰ŒÃ—MBTI äººæ ¼æ·±åº¦è§£æ</title>
    <style>
        * { box-sizing: border-box; }
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e8e8e8;
            min-height: 100vh;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 24px; }
        .header { text-align: center; color: #fff; margin: 24px 0; }
        .header h1 { margin: 0 0 8px; font-size: 32px; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
        .header p { font-size: 16px; opacity: 0.9; }
        
        .card { 
            background: rgba(255,255,255,0.05); 
            border-radius: 20px; 
            padding: 24px; 
            box-shadow: 0 8px 32px rgba(0,0,0,0.3); 
            margin-bottom: 20px; 
            border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
        }
        
        .grid { display: grid; grid-template-columns: repeat(auto-fit,minmax(300px,1fr)); gap: 20px; }
        .btn { 
            display:inline-block; 
            background: linear-gradient(135deg, #667eea, #764ba2); 
            color:#fff; 
            border:none; 
            padding:12px 24px; 
            border-radius:25px; 
            cursor:pointer; 
            font-weight:600; 
            font-size: 14px;
            transition: all 0.3s ease;
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4); }
        .btn-secondary { background: linear-gradient(135deg, #4a5568, #2d3748); }
        .btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
        
        .muted { color:#a0aec0; font-size:14px; }
        label { font-weight:600; display:block; margin:12px 0 8px; color: #e2e8f0; }
        input, select { 
            width:100%; 
            padding:12px; 
            border-radius:12px; 
            border:1px solid rgba(255,255,255,0.2); 
            background: rgba(255,255,255,0.1);
            color: #e8e8e8;
            font-size: 14px;
        }
        input:focus, select:focus { 
            outline: none; 
            border-color: #667eea; 
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .pill { 
            display:inline-block; 
            padding:8px 16px; 
            border-radius:20px; 
            background:rgba(102, 126, 234, 0.2); 
            color:#a0aec0; 
            font-weight:600; 
            font-size:12px; 
            border: 1px solid rgba(102, 126, 234, 0.3);
        }
        
        .kpi { font-size: 28px; font-weight:800; color:#667eea; }
        .q { 
            border: 1px solid rgba(255,255,255,0.1); 
            border-radius:16px; 
            padding:20px; 
            margin-bottom:20px; 
            background: rgba(255,255,255,0.03);
        }
        .opt { margin:12px 0; }
        .opt input { width:auto; margin-right:12px; }
        .opt label { 
            display: flex; 
            align-items: center; 
            cursor: pointer; 
            padding: 12px; 
            border-radius: 12px; 
            transition: all 0.3s ease;
        }
        .opt label:hover { background: rgba(255,255,255,0.05); }
        .opt input:checked + span { color: #667eea; font-weight: 600; }
        
        .result { 
            margin-top: 16px; 
            padding: 16px 20px; 
            border-left: 4px solid #48bb78; 
            background: rgba(72, 187, 120, 0.1); 
            color: #9ae6b4; 
            border-radius: 12px; 
        }
        
        .section-title { margin: 0 0 16px; color: #e2e8f0; font-size: 20px; }
        .hidden { display: none; }
        
        .tarot-card {
            background: linear-gradient(135deg, #2d3748, #4a5568);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            border: 2px solid rgba(255,255,255,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .tarot-card:hover { transform: translateY(-4px); box-shadow: 0 12px 40px rgba(0,0,0,0.4); }
        .tarot-card.selected { border-color: #667eea; box-shadow: 0 0 20px rgba(102, 126, 234, 0.3); }
        .tarot-card img { width: 80px; height: 120px; object-fit: cover; border-radius: 8px; margin-bottom: 12px; }
        .tarot-card h4 { margin: 8px 0; color: #e2e8f0; }
        .tarot-card p { font-size: 12px; color: #a0aec0; margin: 0; }
        
        .mbti-dimension { 
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); 
            border-left: 4px solid #667eea; 
        }
        .tarot-insight { 
            background: linear-gradient(135deg, rgba(72, 187, 120, 0.1), rgba(56, 178, 172, 0.1)); 
            border-left: 4px solid #48bb78; 
        }
        .integration { 
            background: linear-gradient(135deg, rgba(237, 137, 54, 0.1), rgba(245, 101, 101, 0.1)); 
            border-left: 4px solid #ed8936; 
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            transition: width 0.3s ease;
            border-radius: 4px;
        }
        
        .tarot-spread {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .spread-position {
            text-align: center;
            padding: 16px;
            background: rgba(255,255,255,0.03);
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .spread-position h5 { margin: 8px 0; color: #e2e8f0; }
        
        .back-btn {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: #e2e8f0;
            margin-right: 12px;
        }
        .back-btn:hover { background: rgba(255,255,255,0.15); }
        
        .feature-status {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-top: 8px;
        }
        .feature-status.active {
            background: rgba(72, 187, 120, 0.2);
            color: #9ae6b4;
            border: 1px solid rgba(72, 187, 120, 0.3);
        }
        .feature-status.coming-soon {
            background: rgba(237, 137, 54, 0.2);
            color: #fbd38d;
            border: 1px solid rgba(237, 137, 54, 0.3);
        }
        
        @media (max-width: 768px) {
            .container { padding: 16px; }
            .header h1 { font-size: 24px; }
            .grid { grid-template-columns: 1fr; }
            .tarot-spread { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>ğŸ”® å¡”ç½—ç‰ŒÃ—MBTI äººæ ¼æ·±åº¦è§£æ</h1>
            <p class="muted">ç»“åˆç¥ç§˜å¡”ç½—ç‰Œä¸MBTIç†è®ºï¼Œæ¢ç´¢ä½ çš„å†…å¿ƒä¸–ç•Œä¸æ€§æ ¼å¯†ç </p>
        </div>
    </div>

    <div class="container">
        <!-- åŸºç¡€ä¿¡æ¯è¾“å…¥ -->
        <div class="card">
            <div class="grid">
                <div>
                    <h3 class="section-title">ğŸ”® åŸºç¡€ä¿¡æ¯</h3>
                    <label for="bDate">å‡ºç”Ÿæ—¥æœŸ</label>
                    <input type="date" id="bDate" />
                    <label for="bTime">å‡ºç”Ÿæ—¶é—´ï¼ˆ24å°æ—¶åˆ¶ï¼‰</label>
                    <input type="time" id="bTime" value="12:00" />
                    <label for="name">å§“åï¼ˆå¯é€‰ï¼‰</label>
                    <input type="text" id="name" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å" />
                    <div style="margin-top:20px">
                        <button class="btn" type="button" onclick="startTarotTest()">å¼€å§‹å¡”ç½—ç‰Œæµ‹è¯•</button>
                        <button class="btn btn-secondary" type="button" onclick="location.href='index.html'" style="margin-left:12px">è¿”å›é¦–é¡µ</button>
                    </div>
                    <p class="muted" style="margin-top:12px">åŸºäºã€Šå…¶å®ä½ å·²ç»å¾ˆå¡”ç½—äº†ã€‹ã€Šå¡”ç½—è‘µèŠ±å®å…¸ã€‹ã€Š78åº¦çš„æ™ºæ…§ã€‹ç­‰ç»å…¸å¡”ç½—è‘—ä½œï¼Œç»“åˆMBTIç†è®ºè¿›è¡Œäººæ ¼æ·±åº¦è§£æã€‚</p>
                </div>
                <div>
                    <h3 class="section-title">ğŸ´ æµ‹è¯•è¯´æ˜</h3>
                    <div class="pill">æµ‹è¯•æµç¨‹</div>
                    <div class="muted" style="margin-top:8px">
                        1. åŸºç¡€ä¿¡æ¯æ”¶é›†<br>
                        2. MBTIæ€§æ ¼æµ‹è¯•<br>
                        3. å¡”ç½—ç‰Œé€‰æ‹©<br>
                        4. èåˆè§£æç»“æœ
                    </div>
                    <div style="height:16px"></div>
                    <div class="pill">å¡”ç½—ç‰Œé˜µ</div>
                    <div class="muted" style="margin-top:8px">
                        ä½¿ç”¨å‡¯å°”ç‰¹åå­—ç‰Œé˜µï¼Œæ­ç¤ºï¼š<br>
                        â€¢ å½“å‰çŠ¶å†µ<br>
                        â€¢ å†…åœ¨ç‰¹è´¨<br>
                        â€¢ æ½œåœ¨æŒ‘æˆ˜<br>
                        â€¢ å‘å±•å»ºè®®
                    </div>
                </div>
            </div>
        </div>

        <!-- MBTIæµ‹è¯•éƒ¨åˆ† -->
        <div class="card hidden" id="mbtiSection">
            <h3 class="section-title">ğŸ§  MBTI å››ç»´åº¦æµ‹è¯•</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="mbtiProgress"></div>
            </div>
            <div id="mbtiQuestions"></div>
            <div style="margin-top:20px">
                <button class="btn back-btn" type="button" onclick="previousSection('basicSection')">è¿”å›</button>
                <button class="btn" type="button" onclick="nextSection('tarotSection')" id="mbtiNextBtn" disabled>ä¸‹ä¸€æ­¥ï¼šå¡”ç½—ç‰Œé€‰æ‹©</button>
            </div>
        </div>

        <!-- å¡”ç½—ç‰Œé€‰æ‹©éƒ¨åˆ† -->
        <div class="card hidden" id="tarotSection">
            <h3 class="section-title">ğŸ´ å¡”ç½—ç‰Œé€‰æ‹©</h3>
            <p class="muted">è¯·é€‰æ‹©ä¸ä½ å†…å¿ƒå…±é¸£çš„å¡”ç½—ç‰Œï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å‡¯å°”ç‰¹åå­—ç‰Œé˜µè¿›è¡Œè§£è¯»</p>
            
            <div class="tarot-spread">
                <div class="spread-position">
                    <h5>ğŸ¯ ä¸­å¿ƒç‰Œ - å½“å‰çŠ¶å†µ</h5>
                    <div id="centerCard" class="tarot-card" onclick="selectCard('center', this)">
                        <div style="width:80px;height:120px;background:linear-gradient(135deg,#2d3748,#4a5568);border-radius:8px;display:flex;align-items:center;justify-content:center;margin:0 auto 12px;">
                            <span style="font-size:24px;">ğŸ´</span>
                        </div>
                        <h4>é€‰æ‹©ä¸­å¿ƒç‰Œ</h4>
                        <p>ä»£è¡¨ä½ å½“å‰çš„çŠ¶æ€</p>
                    </div>
                </div>
                
                <div class="spread-position">
                    <h5>ğŸ”„ åå­—ç‰Œ - å†…åœ¨ç‰¹è´¨</h5>
                    <div id="crossCard" class="tarot-card" onclick="selectCard('cross', this)">
                        <div style="width:80px;height:120px;background:linear-gradient(135deg,#2d3748,#4a5568);border-radius:8px;display:flex;align-items:center;justify-content:center;margin:0 auto 12px;">
                            <span style="font-size:24px;">ğŸ´</span>
                        </div>
                        <h4>é€‰æ‹©åå­—ç‰Œ</h4>
                        <p>ä»£è¡¨ä½ çš„å†…åœ¨ç‰¹è´¨</p>
                    </div>
                </div>
                
                <div class="spread-position">
                    <h5>ğŸŒŸ åŸºç¡€ç‰Œ - æ½œåœ¨æŒ‘æˆ˜</h5>
                    <div id="baseCard" class="tarot-card" onclick="selectCard('base', this)">
                        <div style="width:80px;height:120px;background:linear-gradient(135deg,#2d3748,#4a5568);border-radius:8px;display:flex:flex;align-items:center;justify-content:center;margin:0 auto 12px;">
                            <span style="font-size:24px;">ğŸ´</span>
                        </div>
                        <h4>é€‰æ‹©åŸºç¡€ç‰Œ</h4>
                        <p>ä»£è¡¨æ½œåœ¨æŒ‘æˆ˜</p>
                    </div>
                </div>
                
                <div class="spread-position">
                    <h5>ğŸ”® æœªæ¥ç‰Œ - å‘å±•å»ºè®®</h5>
                    <div id="futureCard" class="tarot-card" onclick="selectCard('future', this)">
                        <div style="width:80px;height:120px;background:linear-gradient(135deg,#2d3748,#4a5568);border-radius:8px;display:flex;align-items:center;justify-content:center;margin:0 auto 12px;">
                            <div style="text-align:center;">
                                <span style="font-size:24px;">ğŸ´</span>
                            </div>
                        </div>
                        <h4>é€‰æ‹©æœªæ¥ç‰Œ</h4>
                        <p>ä»£è¡¨å‘å±•å»ºè®®</p>
                    </div>
                </div>
            </div>
            
            <div style="margin-top:20px">
                <button class="btn back-btn" type="button" onclick="previousSection('mbtiSection')">è¿”å›</button>
                <button class="btn" type="button" onclick="generateResults()" id="tarotNextBtn" disabled>ç”Ÿæˆè§£æç»“æœ</button>
            </div>
        </div>

        <!-- ç»“æœè§£æéƒ¨åˆ† -->
        <div class="card hidden" id="resultsSection">
            <h3 class="section-title">ğŸŒŸ å¡”ç½—ç‰ŒÃ—MBTI èåˆè§£æ</h3>
            
            <!-- MBTIç±»å‹æ˜¾ç¤º -->
            <div class="card mbti-dimension" style="margin-bottom:20px">
                <div class="pill">ä½ çš„MBTIç±»å‹</div>
                <div id="mbtiType" class="kpi" style="font-size:24px; margin-top:8px"></div>
                <div id="mbtiDescription" class="muted" style="margin-top:8px"></div>
            </div>
            
            <!-- å¡”ç½—ç‰Œè§£è¯» -->
            <div class="grid">
                <div class="card tarot-insight">
                    <div class="pill">ğŸ¯ ä¸­å¿ƒç‰Œè§£è¯»</div>
                    <div id="centerInterpretation" class="muted" style="margin-top:8px"></div>
                </div>
                <div class="card tarot-insight">
                    <div class="pill">ğŸ”„ åå­—ç‰Œè§£è¯»</div>
                    <div id="crossInterpretation" class="muted" style="margin-top:8px"></div>
                </div>
                <div class="card tarot-insight">
                    <div class="pill">ğŸŒŸ åŸºç¡€ç‰Œè§£è¯»</div>
                    <div id="baseInterpretation" class="muted" style="margin-top:8px"></div>
                </div>
                <div class="card tarot-insight">
                    <div class="pill">ğŸ”® æœªæ¥ç‰Œè§£è¯»</div>
                    <div id="futureInterpretation" class="muted" style="margin-top:8px"></div>
                </div>
            </div>
            
            <!-- èåˆè§£æ -->
            <div class="card integration" style="margin-top:20px">
                <div class="pill">ğŸŒŸ å¡”ç½—ç‰ŒÃ—MBTI èåˆè§£æ</div>
                <div id="fusionAnalysis" class="muted" style="margin-top:12px"></div>
            </div>
            
            <!-- äººç”Ÿå»ºè®® -->
            <div class="card integration" style="margin-top:20px">
                <div class="pill">ğŸ’¡ äººç”Ÿå‘å±•å»ºè®®</div>
                <div id="lifeAdvice" class="muted" style="margin-top:12px"></div>
            </div>
            
            <div style="margin-top:20px">
                <button class="btn back-btn" type="button" onclick="previousSection('tarotSection')">è¿”å›</button>
                <button class="btn" type="button" onclick="location.href='index.html'">è¿”å›é¦–é¡µ</button>
                <button class="btn btn-secondary" type="button" onclick="restartTest()">é‡æ–°æµ‹è¯•</button>
            </div>
        </div>
    </div>

    <script>
        // å¡”ç½—ç‰Œæ•°æ® - åŸºäºç»å…¸å¡”ç½—ç‰Œç†è®º
        const TAROT_CARDS = {
            // å¤§é˜¿å¡çº³ç‰Œ
            'æ„šè€…': { 
                element: 'é£', 
                mbti: ['ENFP', 'INFP'], 
                meaning: 'æ–°çš„å¼€å§‹ã€å†’é™©ç²¾ç¥ã€çº¯çœŸæ— é‚ª',
                advice: 'ä¿æŒå¼€æ”¾å¿ƒæ€ï¼Œå‹‡æ•¢å°è¯•æ–°äº‹ç‰©'
            },
            'é­”æœ¯å¸ˆ': { 
                element: 'é£', 
                mbti: ['ENTP', 'INTJ'], 
                meaning: 'åˆ›é€ åŠ›ã€æŠ€èƒ½ã€æ„å¿—åŠ›',
                advice: 'å‘æŒ¥ä½ çš„æ‰èƒ½ï¼Œä¸“æ³¨ç›®æ ‡å®ç°'
            },
            'å¥³ç¥­å¸': { 
                element: 'æ°´', 
                mbti: ['INFJ', 'INTJ'], 
                meaning: 'ç›´è§‰ã€æ™ºæ…§ã€ç¥ç§˜',
                advice: 'å€¾å¬å†…å¿ƒå£°éŸ³ï¼Œç›¸ä¿¡ä½ çš„ç›´è§‰'
            },
            'å¥³çš‡': { 
                element: 'åœŸ', 
                mbti: ['ESFJ', 'ISFJ'], 
                meaning: 'ä¸°é¥¶ã€æ¯æ€§ã€åˆ›é€ åŠ›',
                advice: 'åŸ¹å…»åˆ›é€ åŠ›ï¼Œå…³æ³¨å®¶åº­å’Œå…³ç³»'
            },
            'çš‡å¸': { 
                element: 'ç«', 
                mbti: ['ESTJ', 'ENTJ'], 
                meaning: 'æƒå¨ã€é¢†å¯¼åŠ›ã€ç¨³å®š',
                advice: 'æ‰¿æ‹…è´£ä»»ï¼Œå»ºç«‹ç§©åºå’Œç»“æ„'
            },
            'æ•™çš‡': { 
                element: 'åœŸ', 
                mbti: ['ENFJ', 'INFJ'], 
                meaning: 'ä¼ ç»Ÿã€æ•™è‚²ã€ç²¾ç¥æŒ‡å¯¼',
                advice: 'å¯»æ±‚æ™ºæ…§ï¼Œä¼ æ‰¿çŸ¥è¯†å’Œä»·å€¼è§‚'
            },
            'æ‹äºº': { 
                element: 'é£', 
                mbti: ['ENFP', 'ESFP'], 
                meaning: 'çˆ±æƒ…ã€é€‰æ‹©ã€å’Œè°',
                advice: 'åšå‡ºé‡è¦é€‰æ‹©ï¼Œå¹³è¡¡ç†æ€§ä¸æ„Ÿæ€§'
            },
            'æˆ˜è½¦': { 
                element: 'ç«', 
                mbti: ['ESTP', 'ENTP'], 
                meaning: 'èƒœåˆ©ã€æ„å¿—åŠ›ã€æ§åˆ¶',
                advice: 'ä¿æŒä¸“æ³¨ï¼Œå…‹æœéšœç¢'
            },
            'åŠ›é‡': { 
                element: 'ç«', 
                mbti: ['ESFP', 'ISFP'], 
                meaning: 'å‹‡æ°”ã€è€å¿ƒã€å†…åœ¨åŠ›é‡',
                advice: 'åŸ¹å…»å†…åœ¨åŠ›é‡ï¼Œä¿æŒè€å¿ƒ'
            },
            'éšè€…': { 
                element: 'åœŸ', 
                mbti: ['INTP', 'ISTP'], 
                meaning: 'æ™ºæ…§ã€ç‹¬å¤„ã€æŒ‡å¯¼',
                advice: 'å¯»æ±‚å†…åœ¨æ™ºæ…§ï¼Œç»™äºˆä»–äººæŒ‡å¯¼'
            },
            'å‘½è¿ä¹‹è½®': { 
                element: 'ç«', 
                mbti: ['ENFP', 'ENTP'], 
                meaning: 'å˜åŒ–ã€å‘½è¿ã€è½¬æŠ˜ç‚¹',
                advice: 'é€‚åº”å˜åŒ–ï¼ŒæŠŠæ¡æœºä¼š'
            },
            'æ­£ä¹‰': { 
                element: 'é£', 
                mbti: ['ISTJ', 'ESTJ'], 
                meaning: 'å¹³è¡¡ã€å…¬æ­£ã€çœŸç†',
                advice: 'ä¿æŒå…¬æ­£ï¼Œå¯»æ±‚çœŸç†'
            },
            'å€’åŠäºº': { 
                element: 'æ°´', 
                mbti: ['INFP', 'INFJ'], 
                meaning: 'ç‰ºç‰²ã€æ–°è§†è§’ã€æš‚åœ',
                advice: 'æ¢ä¸ªè§’åº¦çœ‹é—®é¢˜ï¼Œæ¥å—æš‚åœ'
            },
            'æ­»ç¥': { 
                element: 'æ°´', 
                mbti: ['INTJ', 'ISTJ'], 
                meaning: 'ç»“æŸã€è½¬å˜ã€æ–°ç”Ÿ',
                advice: 'æ¥å—ç»“æŸï¼Œæ‹¥æŠ±æ–°çš„å¼€å§‹'
            },
            'èŠ‚åˆ¶': { 
                element: 'ç«', 
                mbti: ['ISFJ', 'ESFJ'], 
                meaning: 'å¹³è¡¡ã€é€‚åº¦ã€å’Œè°',
                advice: 'ä¿æŒå¹³è¡¡ï¼Œé€‚åº¦è€Œè¡Œ'
            },
            'æ¶é­”': { 
                element: 'åœŸ', 
                mbti: ['ESTP', 'ISTP'], 
                meaning: 'æŸç¼šã€æ¬²æœ›ã€ç‰©è´¨',
                advice: 'è¯†åˆ«æŸç¼šï¼Œè¶…è¶Šç‰©è´¨æ¬²æœ›'
            },
            'å¡”': { 
                element: 'ç«', 
                mbti: ['ENTJ', 'ESTJ'], 
                meaning: 'çªç„¶å˜åŒ–ã€å¯ç¤ºã€æ··ä¹±',
                advice: 'æ¥å—å˜åŒ–ï¼Œä»æ··ä¹±ä¸­å­¦ä¹ '
            },
            'æ˜Ÿæ˜Ÿ': { 
                element: 'é£', 
                mbti: ['INFP', 'ENFP'], 
                meaning: 'å¸Œæœ›ã€çµæ„Ÿã€ä¿¡å¿ƒ',
                advice: 'ä¿æŒå¸Œæœ›ï¼Œç›¸ä¿¡ä½ çš„çµæ„Ÿ'
            },
            'æœˆäº®': { 
                element: 'æ°´', 
                mbti: ['INFJ', 'ISFJ'], 
                meaning: 'ç›´è§‰ã€å¹»æƒ³ã€ææƒ§',
                advice: 'é¢å¯¹ææƒ§ï¼Œç›¸ä¿¡ç›´è§‰'
            },
            'å¤ªé˜³': { 
                element: 'ç«', 
                mbti: ['ESFP', 'ENFP'], 
                meaning: 'å¿«ä¹ã€æˆåŠŸã€æ´»åŠ›',
                advice: 'ä¿æŒä¹è§‚ï¼Œåˆ†äº«å¿«ä¹'
            },
            'å®¡åˆ¤': { 
                element: 'ç«', 
                mbti: ['ENTJ', 'INTJ'], 
                meaning: 'é‡ç”Ÿã€å†…åœ¨å¬å”¤ã€é‡Šæ”¾',
                advice: 'å¬ä»å†…å¿ƒå¬å”¤ï¼Œé‡Šæ”¾æ—§æˆ‘'
            },
            'ä¸–ç•Œ': { 
                element: 'åœŸ', 
                mbti: ['ISFP', 'ISTP'], 
                meaning: 'å®Œæˆã€å’Œè°ã€åœ†æ»¡',
                advice: 'åº†ç¥æˆå°±ï¼Œä¿æŒå’Œè°'
            }
        };

        // MBTIæµ‹è¯•é¢˜ç›®
        const MBTI_QUESTIONS = [
            { id: 1, dimension: 'EI', question: 'åœ¨ç¤¾äº¤åœºåˆï¼Œä½ æ›´å€¾å‘äºï¼š', 
              options: [
                  { text: 'ä¸»åŠ¨ä¸ä»–äººäº¤è°ˆï¼Œè®¤è¯†æ–°æœ‹å‹', score: { E: 1 } },
                  { text: 'ä¸ç†Ÿæ‚‰çš„äººå®‰é™äº¤è°ˆï¼Œæˆ–ç‹¬è‡ªè§‚å¯Ÿ', score: { I: 1 } }
              ] },
            { id: 2, dimension: 'EI', question: 'å½“ä½ éœ€è¦å……ç”µæ—¶ï¼Œä½ ä¼šï¼š', 
              options: [
                  { text: 'å’Œæœ‹å‹ä¸€èµ·å¤–å‡ºæ´»åŠ¨', score: { E: 1 } },
                  { text: 'ç‹¬è‡ªå¾…ç€ï¼Œäº«å—ç‹¬å¤„æ—¶å…‰', score: { I: 1 } }
              ] },
            { id: 3, dimension: 'SN', question: 'ä½ æ›´å…³æ³¨ï¼š', 
              options: [
                  { text: 'å…·ä½“çš„äº‹å®å’Œç»†èŠ‚', score: { S: 1 } },
                  { text: 'å¯èƒ½æ€§å’Œæœªæ¥æ„¿æ™¯', score: { N: 1 } }
              ] },
            { id: 4, dimension: 'SN', question: 'è§£å†³é—®é¢˜æ—¶ï¼Œä½ æ›´å–œæ¬¢ï¼š', 
              options: [
                  { text: 'ä½¿ç”¨å·²æœ‰çš„æ–¹æ³•å’Œç»éªŒ', score: { S: 1 } },
                  { text: 'å°è¯•æ–°çš„åˆ›æ–°æ–¹æ³•', score: { N: 1 } }
              ] },
            { id: 5, dimension: 'TF', question: 'åšå†³å®šæ—¶ï¼Œä½ æ›´çœ‹é‡ï¼š', 
              options: [
                  { text: 'é€»è¾‘åˆ†æå’Œå®¢è§‚äº‹å®', score: { T: 1 } },
                  { text: 'ä¸ªäººä»·å€¼è§‚å’Œä»–äººæ„Ÿå—', score: { F: 1 } }
              ] },
            { id: 6, dimension: 'TF', question: 'å¤„ç†å†²çªæ—¶ï¼Œä½ ä¼šï¼š', 
              options: [
                  { text: 'å¯»æ±‚å…¬å¹³åˆç†çš„è§£å†³æ–¹æ¡ˆ', score: { T: 1 } },
                  { text: 'è€ƒè™‘å„æ–¹æ„Ÿå—ï¼Œå¯»æ±‚å’Œè°', score: { F: 1 } }
              ] },
            { id: 7, dimension: 'JP', question: 'ä½ æ›´å–œæ¬¢ï¼š', 
              options: [
                  { text: 'åˆ¶å®šè®¡åˆ’å¹¶æŒ‰è®¡åˆ’æ‰§è¡Œ', score: { J: 1 } },
                  { text: 'ä¿æŒçµæ´»æ€§ï¼Œéšæœºåº”å˜', score: { P: 1 } }
              ] },
            { id: 8, dimension: 'JP', question: 'é¢å¯¹æˆªæ­¢æ—¥æœŸï¼Œä½ é€šå¸¸ï¼š', 
              options: [
                  { text: 'æå‰å®Œæˆï¼Œé¿å…å‹åŠ›', score: { J: 1 } },
                  { text: 'åœ¨æœ€åæ—¶åˆ»é«˜æ•ˆå®Œæˆ', score: { P: 1 } }
              ] }
        ];

        let currentSection = 'basicSection';
        let mbtiScores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
        let selectedCards = {};
        let mbtiType = '';

        function startTarotTest() {
            const date = document.getElementById('bDate').value;
            const time = document.getElementById('bTime').value;
            const name = document.getElementById('name').value;
            
            if (!date || !time) {
                alert('è¯·å¡«å†™å‡ºç”Ÿæ—¥æœŸå’Œæ—¶é—´');
                return;
            }
            
            showSection('mbtiSection');
            renderMBTIQuestions();
        }

        function showSection(sectionId) {
            // éšè—æ‰€æœ‰section
            document.querySelectorAll('[id$="Section"]').forEach(el => el.classList.add('hidden'));
            // æ˜¾ç¤ºç›®æ ‡section
            document.getElementById(sectionId).classList.remove('hidden');
            currentSection = sectionId;
        }

        function previousSection(targetSection) {
            showSection(targetSection);
        }

        function nextSection(targetSection) {
            showSection(targetSection);
        }

        function renderMBTIQuestions() {
            const container = document.getElementById('mbtiQuestions');
            container.innerHTML = '';
            
            MBTI_QUESTIONS.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'q';
                questionDiv.innerHTML = `
                    <div style="font-weight:700; margin-bottom:12px">${index + 1}. ${q.question}</div>
                    ${q.options.map((opt, optIndex) => `
                        <div class="opt">
                            <label>
                                <input type="radio" name="q${q.id}" value="${optIndex}" onchange="updateMBTIProgress()">
                                <span>${opt.text}</span>
                            </label>
                        </div>
                    `).join('')}
                `;
                container.appendChild(questionDiv);
            });
            
            updateMBTIProgress();
        }

        function updateMBTIProgress() {
            const totalQuestions = MBTI_QUESTIONS.length;
            const answeredQuestions = document.querySelectorAll('input[type="radio"]:checked').length;
            const progress = (answeredQuestions / totalQuestions) * 100;
            
            document.getElementById('mbtiProgress').style.width = progress + '%';
            
            // æ£€æŸ¥æ˜¯å¦å¯ä»¥è¿›å…¥ä¸‹ä¸€æ­¥
            const nextBtn = document.getElementById('mbtiNextBtn');
            if (answeredQuestions === totalQuestions) {
                nextBtn.disabled = false;
                calculateMBTI();
            } else {
                nextBtn.disabled = true;
            }
        }

        function calculateMBTI() {
            // é‡ç½®åˆ†æ•°
            mbtiScores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            
            // è®¡ç®—åˆ†æ•°
            MBTI_QUESTIONS.forEach(q => {
                const selected = document.querySelector(`input[name="q${q.id}"]:checked`);
                if (selected) {
                    const option = q.options[parseInt(selected.value)];
                    Object.entries(option.score).forEach(([dimension, score]) => {
                        mbtiScores[dimension] += score;
                    });
                }
            });
            
            // ç¡®å®šç±»å‹
            mbtiType = '';
            mbtiType += mbtiScores.E >= mbtiScores.I ? 'E' : 'I';
            mbtiType += mbtiScores.S >= mbtiScores.N ? 'S' : 'N';
            mbtiType += mbtiScores.T >= mbtiScores.F ? 'T' : 'F';
            mbtiType += mbtiScores.J >= mbtiScores.P ? 'J' : 'P';
        }

        function selectCard(position, element) {
            // ç§»é™¤åŒä½ç½®å…¶ä»–å¡ç‰‡çš„é€‰ä¸­çŠ¶æ€
            document.querySelectorAll(`#${position}Card`).forEach(card => card.classList.remove('selected'));
            
            // æ·»åŠ é€‰ä¸­çŠ¶æ€
            element.classList.add('selected');
            
            // éšæœºé€‰æ‹©ä¸€å¼ å¡”ç½—ç‰Œ
            const cardNames = Object.keys(TAROT_CARDS);
            const randomCard = cardNames[Math.floor(Math.random() * cardNames.length)];
            selectedCards[position] = randomCard;
            
            // æ›´æ–°æ˜¾ç¤º
            element.innerHTML = `
                <div style="width:80px;height:120px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:8px;display:flex;align-items:center;justify-content:center;margin:0 auto 12px;">
                    <span style="font-size:24px;">ğŸ´</span>
                </div>
                <h4>${randomCard}</h4>
                <p>${TAROT_CARDS[randomCard].meaning}</p>
            `;
            
            // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰å¡ç‰‡éƒ½å·²é€‰æ‹©
            checkAllCardsSelected();
        }

        function checkAllCardsSelected() {
            const allSelected = ['center', 'cross', 'base', 'future'].every(pos => selectedCards[pos]);
            const nextBtn = document.getElementById('tarotNextBtn');
            nextBtn.disabled = !allSelected;
        }

        function generateResults() {
            showSection('resultsSection');
            
            // æ˜¾ç¤ºMBTIç±»å‹
            document.getElementById('mbtiType').textContent = mbtiType;
            document.getElementById('mbtiDescription').textContent = getMBTIDescription(mbtiType);
            
            // æ˜¾ç¤ºå¡”ç½—ç‰Œè§£è¯»
            document.getElementById('centerInterpretation').innerHTML = getCardInterpretation('center', selectedCards.center);
            document.getElementById('crossInterpretation').innerHTML = getCardInterpretation('cross', selectedCards.cross);
            document.getElementById('baseInterpretation').innerHTML = getCardInterpretation('base', selectedCards.base);
            document.getElementById('futureInterpretation').innerHTML = getCardInterpretation('future', selectedCards.future);
            
            // ç”Ÿæˆèåˆè§£æ
            document.getElementById('fusionAnalysis').innerHTML = generateFusionAnalysis();
            
            // ç”Ÿæˆäººç”Ÿå»ºè®®
            document.getElementById('lifeAdvice').innerHTML = generateLifeAdvice();
        }

        function getMBTIDescription(type) {
            const descriptions = {
                'INTJ': 'å»ºç­‘å¸ˆ - å¯Œæœ‰æƒ³è±¡åŠ›å’Œæˆ˜ç•¥æ€§çš„æ€è€ƒè€…',
                'INTP': 'é€»è¾‘å­¦å®¶ - å…·æœ‰åˆ›æ–°æ€§çš„å‘æ˜å®¶',
                'ENTJ': 'æŒ‡æŒ¥å®˜ - å¤§èƒ†ã€å¯Œæœ‰æƒ³è±¡åŠ›çš„é¢†å¯¼è€…',
                'ENTP': 'è¾©è®ºå®¶ - èªæ˜å¥½å¥‡çš„æ€æƒ³å®¶',
                'INFJ': 'æå€¡è€… - å®‰é™è€Œç¥ç§˜ï¼Œé¼“èˆäººå¿ƒ',
                'INFP': 'è°ƒåœè€… - è¯—æ„ã€å–„è‰¯çš„åˆ©ä»–ä¸»ä¹‰è€…',
                'ENFJ': 'ä¸»äººå…¬ - å¯Œæœ‰é­…åŠ›å’Œé¼“èˆäººå¿ƒçš„é¢†å¯¼è€…',
                'ENFP': 'ç«é€‰è€… - çƒ­æƒ…ã€æœ‰åˆ›é€ åŠ›ã€ç¤¾äº¤èƒ½åŠ›å¼º',
                'ISTJ': 'ç‰©æµå¸ˆ - å®ç”¨ä¸»ä¹‰è€…å’Œäº‹å®çˆ±å¥½è€…',
                'ISFJ': 'å®ˆå«è€… - éå¸¸ä¸“æ³¨å’Œæ¸©æš–çš„å®ˆæŠ¤è€…',
                'ESTJ': 'æ€»ç»ç† - ä¼˜ç§€çš„ç®¡ç†è€…ï¼Œä¸å¯é˜»æŒ¡',
                'ESFJ': 'æ‰§æ”¿å®˜ - éå¸¸å…³å¿ƒä»–äººçš„çœ‹æŠ¤è€…',
                'ISTP': 'é‰´èµå®¶ - å¤§èƒ†è€Œå®ç”¨çš„å®éªŒå®¶',
                'ISFP': 'æ¢é™©å®¶ - çµæ´»å’Œæœ‰é­…åŠ›çš„è‰ºæœ¯å®¶',
                'ESTP': 'ä¼ä¸šå®¶ - èªæ˜ã€ç²¾åŠ›å……æ²›ã€éå¸¸å–„è§£äººæ„',
                'ESFP': 'è¡¨æ¼”è€… - è‡ªå‘çš„ã€ç²¾åŠ›å……æ²›çš„è¡¨æ¼”è€…'
            };
            return descriptions[type] || 'ç‹¬ç‰¹çš„ä¸ªæ€§ç±»å‹';
        }

        function getCardInterpretation(position, cardName) {
            const card = TAROT_CARDS[cardName];
            const positionMeanings = {
                'center': 'ä»£è¡¨ä½ å½“å‰çš„çŠ¶æ€å’Œå…³æ³¨ç‚¹',
                'cross': 'ä»£è¡¨ä½ çš„å†…åœ¨ç‰¹è´¨å’Œæ ¸å¿ƒèƒ½åŠ›',
                'base': 'ä»£è¡¨ä½ éœ€è¦é¢å¯¹çš„æ½œåœ¨æŒ‘æˆ˜',
                'future': 'ä»£è¡¨ä½ çš„å‘å±•æ–¹å‘å’Œå»ºè®®'
            };
            
            return `
                <strong>${cardName}</strong><br>
                <em>${positionMeanings[position]}</em><br>
                <strong>å«ä¹‰ï¼š</strong>${card.meaning}<br>
                <strong>å»ºè®®ï¼š</strong>${card.advice}
            `;
        }

        function generateFusionAnalysis() {
            const centerCard = TAROT_CARDS[selectedCards.center];
            const crossCard = TAROT_CARDS[selectedCards.cross];
            const baseCard = TAROT_CARDS[selectedCards.base];
            const futureCard = TAROT_CARDS[selectedCards.future];
            
            // åˆ†æå…ƒç´ ä¸MBTIçš„å…³è”
            const elementAnalysis = analyzeElementMBTI();
            
            return `
                <strong>å¡”ç½—ç‰Œå…ƒç´ åˆ†æï¼š</strong><br>
                ä¸­å¿ƒç‰Œï¼ˆ${centerCard.element}ï¼‰+ åå­—ç‰Œï¼ˆ${crossCard.element}ï¼‰+ åŸºç¡€ç‰Œï¼ˆ${baseCard.element}ï¼‰+ æœªæ¥ç‰Œï¼ˆ${futureCard.element}ï¼‰<br><br>
                
                <strong>MBTIç±»å‹ç‰¹å¾ï¼š</strong><br>
                ${mbtiType}ç±»å‹ï¼š${getMBTIDescription(mbtiType)}<br><br>
                
                <strong>èåˆè§£è¯»ï¼š</strong><br>
                ä½ çš„${mbtiType}æ€§æ ¼ç‰¹è´¨ä¸å¡”ç½—ç‰Œæ­ç¤ºçš„${elementAnalysis}å…ƒç´ èƒ½é‡ç›¸ç»“åˆï¼Œå½¢æˆäº†ç‹¬ç‰¹çš„ä¸ªæ€§ç»„åˆã€‚
                å½“å‰ä½ æ­£å¤„äº${centerCard.meaning}çš„çŠ¶æ€ï¼Œå†…åœ¨å…·å¤‡${crossCard.meaning}çš„ç‰¹è´¨ï¼Œ
                éœ€è¦é¢å¯¹${baseCard.meaning}çš„æŒ‘æˆ˜ï¼Œæœªæ¥å°†æœç€${futureCard.meaning}çš„æ–¹å‘å‘å±•ã€‚
            `;
        }

        function analyzeElementMBTI() {
            const elements = ['center', 'cross', 'base', 'future'].map(pos => TAROT_CARDS[selectedCards[pos]].element);
            const elementCounts = elements.reduce((acc, element) => {
                acc[element] = (acc[element] || 0) + 1;
                return acc;
            }, {});
            
            const dominantElement = Object.entries(elementCounts).reduce((a, b) => a[1] > b[1] ? a : b)[0];
            
            const elementMBTI = {
                'ç«': 'çƒ­æƒ…ã€è¡ŒåŠ¨åŠ›å¼ºï¼Œé€‚åˆå¤–å‘å‹äººæ ¼',
                'åœŸ': 'ç¨³é‡ã€åŠ¡å®ï¼Œé€‚åˆåˆ¤æ–­å‹äººæ ¼',
                'é£': 'çµæ´»ã€åˆ›æ–°ï¼Œé€‚åˆæ„ŸçŸ¥å‹äººæ ¼',
                'æ°´': 'æ„Ÿæ€§ã€ç›´è§‰ï¼Œé€‚åˆæƒ…æ„Ÿå‹äººæ ¼'
            };
            
            return dominantElement + 'ï¼ˆ' + elementMBTI[dominantElement] + 'ï¼‰';
        }

        function generateLifeAdvice() {
            const centerCard = TAROT_CARDS[selectedCards.center];
            const crossCard = TAROT_CARDS[selectedCards.cross];
            const baseCard = TAROT_CARDS[selectedCards.base];
            const futureCard = TAROT_CARDS[selectedCards.future];
            
            return `
                <strong>åŸºäºä½ çš„MBTIç±»å‹å’Œå¡”ç½—ç‰Œè§£è¯»ï¼Œå»ºè®®ä½ ï¼š</strong><br><br>
                
                <strong>1. å½“å‰é˜¶æ®µï¼ˆ${centerCard.meaning}ï¼‰ï¼š</strong><br>
                ${centerCard.advice}<br><br>
                
                <strong>2. å‘æŒ¥ä¼˜åŠ¿ï¼ˆ${crossCard.meaning}ï¼‰ï¼š</strong><br>
                ${crossCard.advice}<br><br>
                
                <strong>3. é¢å¯¹æŒ‘æˆ˜ï¼ˆ${baseCard.meaning}ï¼‰ï¼š</strong><br>
                ${baseCard.advice}<br><br>
                
                <strong>4. å‘å±•æ–¹å‘ï¼ˆ${futureCard.meaning}ï¼‰ï¼š</strong><br>
                ${futureCard.advice}<br><br>
                
                <strong>æ€»ä½“å»ºè®®ï¼š</strong><br>
                ç»“åˆä½ çš„${mbtiType}æ€§æ ¼ç‰¹è´¨ï¼Œåœ¨ä¿æŒä¸ªæ€§çš„åŒæ—¶ï¼Œå­¦ä¼šå¹³è¡¡å„ç§èƒ½é‡ã€‚
                å½“å‰é˜¶æ®µè¦${centerCard.advice.toLowerCase()}ï¼Œå‘æŒ¥ä½ çš„${crossCard.meaning}ä¼˜åŠ¿ï¼Œ
                å‹‡æ•¢é¢å¯¹${baseCard.meaning}çš„æŒ‘æˆ˜ï¼Œæœç€${futureCard.meaning}çš„ç›®æ ‡å‰è¿›ã€‚
            `;
        }

        function restartTest() {
            // é‡ç½®æ‰€æœ‰çŠ¶æ€
            mbtiScores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            selectedCards = {};
            mbtiType = '';
            
            // é‡ç½®è¡¨å•
            document.getElementById('bDate').value = '';
            document.getElementById('bTime').value = '12:00';
            document.getElementById('name').value = '';
            
            // é‡ç½®è¿›åº¦æ¡
            document.getElementById('mbtiProgress').style.width = '0%';
            
            // é‡ç½®æŒ‰é’®çŠ¶æ€
            document.getElementById('mbtiNextBtn').disabled = true;
            document.getElementById('tarotNextBtn').disabled = true;
            
            // é‡ç½®å¡”ç½—ç‰Œé€‰æ‹©
            ['center', 'cross', 'base', 'future'].forEach(pos => {
                const card = document.getElementById(pos + 'Card');
                card.classList.remove('selected');
                card.innerHTML = `
                    <div style="width:80px;height:120px;background:linear-gradient(135deg,#2d3748,#4a5568);border-radius:8px;display:flex;align-items:center;justify-content:center;margin:0 auto 12px;">
                        <span style="font-size:24px;">ğŸ´</span>
                    </div>
                    <h4>é€‰æ‹©${pos === 'center' ? 'ä¸­å¿ƒ' : pos === 'cross' ? 'åå­—' : pos === 'base' ? 'åŸºç¡€' : 'æœªæ¥'}ç‰Œ</h4>
                    <p>ä»£è¡¨${pos === 'center' ? 'ä½ å½“å‰çš„çŠ¶æ€' : pos === 'cross' ? 'ä½ çš„å†…åœ¨ç‰¹è´¨' : pos === 'base' ? 'æ½œåœ¨æŒ‘æˆ˜' : 'å‘å±•å»ºè®®'}</p>
                `;
            });
            
            // è¿”å›åŸºç¡€ä¿¡æ¯éƒ¨åˆ†
            showSection('basicSection');
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // è®¾ç½®é»˜è®¤æ—¶é—´ä¸ºå½“å‰æ—¶é—´
            const now = new Date();
            const timeString = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
            document.getElementById('bTime').value = timeString;
        });
    </script>
</body>
</html>
