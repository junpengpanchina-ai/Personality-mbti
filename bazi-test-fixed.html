<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>八字×MBTI×数字命理 人格深度解析</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        .language-switcher { text-align: center; margin: 20px 0; }
        .lang-tabs { display: inline-flex; background: #e0e0e0; border-radius: 25px; padding: 4px; }
        .lang-tab { background: transparent; border: none; padding: 8px 16px; margin: 0 2px; border-radius: 20px; cursor: pointer; }
        .lang-tab.active { background: #007bff; color: white; }
        .btn { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; }
        .card { background: #f8f9fa; padding: 20px; margin: 20px 0; border-radius: 10px; border: 1px solid #dee2e6; }
        .toast { position: fixed; top: 20px; right: 20px; background: rgba(0,0,0,0.8); color: white; padding: 15px 20px; border-radius: 10px; z-index: 1000; }
    </style>
</head>
<body>
    <div class="container">
        <h1 data-i18n="main.title">🧠 八字×MBTI×数字命理 人格深度解析</h1>
        <p data-i18n="main.subtitle">结合传统命理学、MBTI理论与现代数字命理学，探索你的性格密码与人生格局</p>
        
        <div class="language-switcher">
            <div class="lang-tabs">
                <button class="lang-tab active" onclick="switchLanguage('zh')" data-lang="zh">🇨🇳</button>
                <button class="lang-tab" onclick="switchLanguage('en')" data-lang="en">🇺🇸</button>
                <button class="lang-tab" onclick="switchLanguage('de')" data-lang="de">🇩🇪</button>
                <button class="lang-tab" onclick="switchLanguage('fr')" data-lang="fr">🇫🇷</button>
                <button class="lang-tab" onclick="switchLanguage('ja')" data-lang="ja">🇯🇵</button>
            </div>
        </div>
        
        <div class="card">
            <h3 data-i18n="form.basicInfo">基础信息</h3>
            <label data-i18n="form.birthDate">出生日期</label><br>
            <input type="date" id="bDate" /><br><br>
            <label data-i18n="form.birthTime">出生时间</label><br>
            <input type="time" id="bTime" value="12:00" /><br><br>
            <button class="btn" onclick="testI18n()">🧪 测试国际化</button>
            <button class="btn" onclick="location.href='index.html'">🏠 返回首页</button>
        </div>
        
        <div class="card">
            <h3 data-i18n="bazi.basic">八字基础</h3>
            <p data-i18n="bazi.fourPillars">四柱</p>
            <p data-i18n="bazi.wuxingStats">五行统计</p>
        </div>
        
        <div class="card">
            <h3 data-i18n="mbti.title">🧠 MBTI 四维度分析</h3>
            <p data-i18n="mbti.ei">外向 E / 内向 I</p>
            <p data-i18n="mbti.sn">感觉 S / 直觉 N</p>
            <p data-i18n="mbti.tf">思考 T / 情感 F</p>
            <p data-i18n="mbti.jp">判断 J / 感知 P</p>
        </div>
    </div>

    <script>
        // 国际化配置
        const TRANSLATIONS = {
            zh: {
                main: { title: "🧠 八字×MBTI×数字命理 人格深度解析", subtitle: "结合传统命理学、MBTI理论与现代数字命理学，探索你的性格密码与人生格局" },
                form: { basicInfo: "基础信息", birthDate: "出生日期", birthTime: "出生时间" },
                bazi: { basic: "八字基础", fourPillars: "四柱", wuxingStats: "五行统计" },
                mbti: { title: "🧠 MBTI 四维度分析", ei: "外向 E / 内向 I", sn: "感觉 S / 直觉 N", tf: "思考 T / 情感 F", jp: "判断 J / 感知 P" }
            },
            en: {
                main: { title: "🧠 Bazi × MBTI × Numerology Analysis", subtitle: "Combining traditional astrology, MBTI theory and numerology to explore your personality" },
                form: { basicInfo: "Basic Information", birthDate: "Birth Date", birthTime: "Birth Time" },
                bazi: { basic: "Bazi Basics", fourPillars: "Four Pillars", wuxingStats: "Five Elements" },
                mbti: { title: "🧠 MBTI Four Dimensions", ei: "Extraversion E / Introversion I", sn: "Sensing S / Intuition N", tf: "Thinking T / Feeling F", jp: "Judging J / Perceiving P" }
            },
            de: {
                main: { title: "🧠 Bazi × MBTI × Numerologie Analyse", subtitle: "Kombination von traditioneller Astrologie, MBTI-Theorie und Numerologie" },
                form: { basicInfo: "Grundinformationen", birthDate: "Geburtsdatum", birthTime: "Geburtszeit" },
                bazi: { basic: "Bazi-Grundlagen", fourPillars: "Vier Säulen", wuxingStats: "Fünf Elemente" },
                mbti: { title: "🧠 MBTI Vier Dimensionen", ei: "Extraversion E / Introversion I", sn: "Sensing S / Intuition N", tf: "Denken T / Fühlen F", jp: "Urteilen J / Wahrnehmen P" }
            },
            fr: {
                main: { title: "🧠 Bazi × MBTI × Numérologie Analyse", subtitle: "Combinant astrologie traditionnelle, théorie MBTI et numérologie" },
                form: { basicInfo: "Informations de Base", birthDate: "Date de Naissance", birthTime: "Heure de Naissance" },
                bazi: { basic: "Bases du Bazi", fourPillars: "Quatre Piliers", wuxingStats: "Cinq Éléments" },
                mbti: { title: "🧠 MBTI Quatre Dimensions", ei: "Extraversion E / Introversion I", sn: "Sensation S / Intuition N", tf: "Pensée T / Sentiment F", jp: "Jugement J / Perception P" }
            },
            ja: {
                main: { title: "🧠 八字×MBTI×数秘術 分析", subtitle: "伝統的な占星術、MBTI理論、数秘術を組み合わせて" },
                form: { basicInfo: "基本情報", birthDate: "生年月日", birthTime: "出生時刻" },
                bazi: { basic: "八字基礎", fourPillars: "四柱", wuxingStats: "五行" },
                mbti: { title: "🧠 MBTI四次元分析", ei: "外向性 E / 内向性 I", sn: "感覚 S / 直感 N", tf: "思考 T / 感情 F", jp: "判断 J / 知覚 P" }
            }
        };
        
        let currentLanguage = 'zh';
        
        // 页面加载时初始化
        window.addEventListener('load', () => {
            console.log('页面加载完成，开始初始化...');
            initializeLanguage();
        });
        
        // 初始化语言设置
        function initializeLanguage() {
            const savedLang = localStorage.getItem('bazi_language');
            if (savedLang && TRANSLATIONS[savedLang]) {
                currentLanguage = savedLang;
            } else {
                currentLanguage = 'zh';
            }
            
            updateLanguageButtons();
            applyLanguage();
            console.log('语言初始化完成:', currentLanguage);
        }
        
        // 切换语言
        function switchLanguage(lang) {
            console.log('尝试切换语言到:', lang);
            
            if (TRANSLATIONS[lang]) {
                currentLanguage = lang;
                localStorage.setItem('bazi_language', lang);
                
                updateLanguageButtons();
                applyLanguage();
                
                showToast(`语言已切换到${getLanguageName(lang)}`, 'success');
                console.log(`语言已切换到: ${lang}`);
            } else {
                console.error(`不支持的语言: ${lang}`);
                showToast(`不支持的语言: ${lang}`, 'error');
            }
        }
        
        // 获取语言名称
        function getLanguageName(lang) {
            const languageNames = { 'zh': '中文', 'en': 'English', 'de': 'Deutsch', 'fr': 'Français', 'ja': '日本語' };
            return languageNames[lang] || lang;
        }
        
        // 更新语言按钮状态
        function updateLanguageButtons() {
            document.querySelectorAll('.lang-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-lang="${currentLanguage}"]`).classList.add('active');
        }
        
        // 应用语言
        function applyLanguage() {
            console.log('开始应用语言:', currentLanguage);
            const elements = document.querySelectorAll('[data-i18n]');
            console.log('找到需要翻译的元素数量:', elements.length);
            
            elements.forEach(element => {
                const key = element.getAttribute('data-i18n');
                const translation = getTranslation(key);
                if (translation) {
                    element.textContent = translation;
                }
            });
            
            // 更新页面标题
            const pageTitle = getTranslation('main.title');
            if (pageTitle) {
                document.title = pageTitle;
            }
            
            console.log('语言应用完成');
        }
        
        // 获取翻译
        function getTranslation(key) {
            const keys = key.split('.');
            let value = TRANSLATIONS[currentLanguage];
            
            for (const k of keys) {
                if (value && value[k]) {
                    value = value[k];
                } else {
                    return null;
                }
            }
            
            return value;
        }
        
        // 测试国际化系统
        function testI18n() {
            console.log('🧪 开始测试国际化系统...');
            console.log('当前语言:', currentLanguage);
            console.log('可用语言:', Object.keys(TRANSLATIONS));
            
            const elements = document.querySelectorAll('[data-i18n]');
            console.log('找到需要翻译的元素数量:', elements.length);
            
            alert(`国际化测试结果:\n当前语言: ${currentLanguage}\n可用语言: ${Object.keys(TRANSLATIONS).join(', ')}\n翻译元素数量: ${elements.length}`);
        }
        
        // 显示提示消息
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }
    </script>
</body>
</html>
