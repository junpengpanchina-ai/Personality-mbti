<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…«å­—Ã—MBTIÃ—æ•°å­—å‘½ç† äººæ ¼æ·±åº¦è§£æ</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        .language-switcher { text-align: center; margin: 20px 0; }
        .lang-tabs { display: inline-flex; background: #e0e0e0; border-radius: 25px; padding: 4px; }
        .lang-tab { background: transparent; border: none; padding: 8px 16px; margin: 0 2px; border-radius: 20px; cursor: pointer; }
        .lang-tab.active { background: #007bff; color: white; }
        .btn { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; }
        .card { background: #f8f9fa; padding: 20px; margin: 20px 0; border-radius: 10px; border: 1px solid #dee2e6; }
        .toast { position: fixed; top: 20px; right: 20px; background: rgba(0,0,0,0.8); color: white; padding: 15px 20px; border-radius: 10px; z-index: 1000; }
    </style>
</head>
<body>
    <div class="container">
        <h1 data-i18n="main.title">ğŸ§  å…«å­—Ã—MBTIÃ—æ•°å­—å‘½ç† äººæ ¼æ·±åº¦è§£æ</h1>
        <p data-i18n="main.subtitle">ç»“åˆä¼ ç»Ÿå‘½ç†å­¦ã€MBTIç†è®ºä¸ç°ä»£æ•°å­—å‘½ç†å­¦ï¼Œæ¢ç´¢ä½ çš„æ€§æ ¼å¯†ç ä¸äººç”Ÿæ ¼å±€</p>
        
        <div class="language-switcher">
            <div class="lang-tabs">
                <button class="lang-tab active" onclick="switchLanguage('zh')" data-lang="zh">ğŸ‡¨ğŸ‡³</button>
                <button class="lang-tab" onclick="switchLanguage('en')" data-lang="en">ğŸ‡ºğŸ‡¸</button>
                <button class="lang-tab" onclick="switchLanguage('de')" data-lang="de">ğŸ‡©ğŸ‡ª</button>
                <button class="lang-tab" onclick="switchLanguage('fr')" data-lang="fr">ğŸ‡«ğŸ‡·</button>
                <button class="lang-tab" onclick="switchLanguage('ja')" data-lang="ja">ğŸ‡¯ğŸ‡µ</button>
            </div>
        </div>
        
        <div class="card">
            <h3 data-i18n="form.basicInfo">åŸºç¡€ä¿¡æ¯</h3>
            <label data-i18n="form.birthDate">å‡ºç”Ÿæ—¥æœŸ</label><br>
            <input type="date" id="bDate" /><br><br>
            <label data-i18n="form.birthTime">å‡ºç”Ÿæ—¶é—´</label><br>
            <input type="time" id="bTime" value="12:00" /><br><br>
            <button class="btn" onclick="testI18n()">ğŸ§ª æµ‹è¯•å›½é™…åŒ–</button>
            <button class="btn" onclick="location.href='index.html'">ğŸ  è¿”å›é¦–é¡µ</button>
        </div>
        
        <div class="card">
            <h3 data-i18n="bazi.basic">å…«å­—åŸºç¡€</h3>
            <p data-i18n="bazi.fourPillars">å››æŸ±</p>
            <p data-i18n="bazi.wuxingStats">äº”è¡Œç»Ÿè®¡</p>
        </div>
        
        <div class="card">
            <h3 data-i18n="mbti.title">ğŸ§  MBTI å››ç»´åº¦åˆ†æ</h3>
            <p data-i18n="mbti.ei">å¤–å‘ E / å†…å‘ I</p>
            <p data-i18n="mbti.sn">æ„Ÿè§‰ S / ç›´è§‰ N</p>
            <p data-i18n="mbti.tf">æ€è€ƒ T / æƒ…æ„Ÿ F</p>
            <p data-i18n="mbti.jp">åˆ¤æ–­ J / æ„ŸçŸ¥ P</p>
        </div>
    </div>

    <script>
        // å›½é™…åŒ–é…ç½®
        const TRANSLATIONS = {
            zh: {
                main: { title: "ğŸ§  å…«å­—Ã—MBTIÃ—æ•°å­—å‘½ç† äººæ ¼æ·±åº¦è§£æ", subtitle: "ç»“åˆä¼ ç»Ÿå‘½ç†å­¦ã€MBTIç†è®ºä¸ç°ä»£æ•°å­—å‘½ç†å­¦ï¼Œæ¢ç´¢ä½ çš„æ€§æ ¼å¯†ç ä¸äººç”Ÿæ ¼å±€" },
                form: { basicInfo: "åŸºç¡€ä¿¡æ¯", birthDate: "å‡ºç”Ÿæ—¥æœŸ", birthTime: "å‡ºç”Ÿæ—¶é—´" },
                bazi: { basic: "å…«å­—åŸºç¡€", fourPillars: "å››æŸ±", wuxingStats: "äº”è¡Œç»Ÿè®¡" },
                mbti: { title: "ğŸ§  MBTI å››ç»´åº¦åˆ†æ", ei: "å¤–å‘ E / å†…å‘ I", sn: "æ„Ÿè§‰ S / ç›´è§‰ N", tf: "æ€è€ƒ T / æƒ…æ„Ÿ F", jp: "åˆ¤æ–­ J / æ„ŸçŸ¥ P" }
            },
            en: {
                main: { title: "ğŸ§  Bazi Ã— MBTI Ã— Numerology Analysis", subtitle: "Combining traditional astrology, MBTI theory and numerology to explore your personality" },
                form: { basicInfo: "Basic Information", birthDate: "Birth Date", birthTime: "Birth Time" },
                bazi: { basic: "Bazi Basics", fourPillars: "Four Pillars", wuxingStats: "Five Elements" },
                mbti: { title: "ğŸ§  MBTI Four Dimensions", ei: "Extraversion E / Introversion I", sn: "Sensing S / Intuition N", tf: "Thinking T / Feeling F", jp: "Judging J / Perceiving P" }
            },
            de: {
                main: { title: "ğŸ§  Bazi Ã— MBTI Ã— Numerologie Analyse", subtitle: "Kombination von traditioneller Astrologie, MBTI-Theorie und Numerologie" },
                form: { basicInfo: "Grundinformationen", birthDate: "Geburtsdatum", birthTime: "Geburtszeit" },
                bazi: { basic: "Bazi-Grundlagen", fourPillars: "Vier SÃ¤ulen", wuxingStats: "FÃ¼nf Elemente" },
                mbti: { title: "ğŸ§  MBTI Vier Dimensionen", ei: "Extraversion E / Introversion I", sn: "Sensing S / Intuition N", tf: "Denken T / FÃ¼hlen F", jp: "Urteilen J / Wahrnehmen P" }
            },
            fr: {
                main: { title: "ğŸ§  Bazi Ã— MBTI Ã— NumÃ©rologie Analyse", subtitle: "Combinant astrologie traditionnelle, thÃ©orie MBTI et numÃ©rologie" },
                form: { basicInfo: "Informations de Base", birthDate: "Date de Naissance", birthTime: "Heure de Naissance" },
                bazi: { basic: "Bases du Bazi", fourPillars: "Quatre Piliers", wuxingStats: "Cinq Ã‰lÃ©ments" },
                mbti: { title: "ğŸ§  MBTI Quatre Dimensions", ei: "Extraversion E / Introversion I", sn: "Sensation S / Intuition N", tf: "PensÃ©e T / Sentiment F", jp: "Jugement J / Perception P" }
            },
            ja: {
                main: { title: "ğŸ§  å…«å­—Ã—MBTIÃ—æ•°ç§˜è¡“ åˆ†æ", subtitle: "ä¼çµ±çš„ãªå æ˜Ÿè¡“ã€MBTIç†è«–ã€æ•°ç§˜è¡“ã‚’çµ„ã¿åˆã‚ã›ã¦" },
                form: { basicInfo: "åŸºæœ¬æƒ…å ±", birthDate: "ç”Ÿå¹´æœˆæ—¥", birthTime: "å‡ºç”Ÿæ™‚åˆ»" },
                bazi: { basic: "å…«å­—åŸºç¤", fourPillars: "å››æŸ±", wuxingStats: "äº”è¡Œ" },
                mbti: { title: "ğŸ§  MBTIå››æ¬¡å…ƒåˆ†æ", ei: "å¤–å‘æ€§ E / å†…å‘æ€§ I", sn: "æ„Ÿè¦š S / ç›´æ„Ÿ N", tf: "æ€è€ƒ T / æ„Ÿæƒ… F", jp: "åˆ¤æ–­ J / çŸ¥è¦š P" }
            }
        };
        
        let currentLanguage = 'zh';
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.addEventListener('load', () => {
            console.log('é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–...');
            initializeLanguage();
        });
        
        // åˆå§‹åŒ–è¯­è¨€è®¾ç½®
        function initializeLanguage() {
            const savedLang = localStorage.getItem('bazi_language');
            if (savedLang && TRANSLATIONS[savedLang]) {
                currentLanguage = savedLang;
            } else {
                currentLanguage = 'zh';
            }
            
            updateLanguageButtons();
            applyLanguage();
            console.log('è¯­è¨€åˆå§‹åŒ–å®Œæˆ:', currentLanguage);
        }
        
        // åˆ‡æ¢è¯­è¨€
        function switchLanguage(lang) {
            console.log('å°è¯•åˆ‡æ¢è¯­è¨€åˆ°:', lang);
            
            if (TRANSLATIONS[lang]) {
                currentLanguage = lang;
                localStorage.setItem('bazi_language', lang);
                
                updateLanguageButtons();
                applyLanguage();
                
                showToast(`è¯­è¨€å·²åˆ‡æ¢åˆ°${getLanguageName(lang)}`, 'success');
                console.log(`è¯­è¨€å·²åˆ‡æ¢åˆ°: ${lang}`);
            } else {
                console.error(`ä¸æ”¯æŒçš„è¯­è¨€: ${lang}`);
                showToast(`ä¸æ”¯æŒçš„è¯­è¨€: ${lang}`, 'error');
            }
        }
        
        // è·å–è¯­è¨€åç§°
        function getLanguageName(lang) {
            const languageNames = { 'zh': 'ä¸­æ–‡', 'en': 'English', 'de': 'Deutsch', 'fr': 'FranÃ§ais', 'ja': 'æ—¥æœ¬èª' };
            return languageNames[lang] || lang;
        }
        
        // æ›´æ–°è¯­è¨€æŒ‰é’®çŠ¶æ€
        function updateLanguageButtons() {
            document.querySelectorAll('.lang-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-lang="${currentLanguage}"]`).classList.add('active');
        }
        
        // åº”ç”¨è¯­è¨€
        function applyLanguage() {
            console.log('å¼€å§‹åº”ç”¨è¯­è¨€:', currentLanguage);
            const elements = document.querySelectorAll('[data-i18n]');
            console.log('æ‰¾åˆ°éœ€è¦ç¿»è¯‘çš„å…ƒç´ æ•°é‡:', elements.length);
            
            elements.forEach(element => {
                const key = element.getAttribute('data-i18n');
                const translation = getTranslation(key);
                if (translation) {
                    element.textContent = translation;
                }
            });
            
            // æ›´æ–°é¡µé¢æ ‡é¢˜
            const pageTitle = getTranslation('main.title');
            if (pageTitle) {
                document.title = pageTitle;
            }
            
            console.log('è¯­è¨€åº”ç”¨å®Œæˆ');
        }
        
        // è·å–ç¿»è¯‘
        function getTranslation(key) {
            const keys = key.split('.');
            let value = TRANSLATIONS[currentLanguage];
            
            for (const k of keys) {
                if (value && value[k]) {
                    value = value[k];
                } else {
                    return null;
                }
            }
            
            return value;
        }
        
        // æµ‹è¯•å›½é™…åŒ–ç³»ç»Ÿ
        function testI18n() {
            console.log('ğŸ§ª å¼€å§‹æµ‹è¯•å›½é™…åŒ–ç³»ç»Ÿ...');
            console.log('å½“å‰è¯­è¨€:', currentLanguage);
            console.log('å¯ç”¨è¯­è¨€:', Object.keys(TRANSLATIONS));
            
            const elements = document.querySelectorAll('[data-i18n]');
            console.log('æ‰¾åˆ°éœ€è¦ç¿»è¯‘çš„å…ƒç´ æ•°é‡:', elements.length);
            
            alert(`å›½é™…åŒ–æµ‹è¯•ç»“æœ:\nå½“å‰è¯­è¨€: ${currentLanguage}\nå¯ç”¨è¯­è¨€: ${Object.keys(TRANSLATIONS).join(', ')}\nç¿»è¯‘å…ƒç´ æ•°é‡: ${elements.length}`);
        }
        
        // æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }
    </script>
</body>
</html>
