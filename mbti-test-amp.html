<!DOCTYPE html>
<html âš¡ lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBTI æµ‹è¯• - AMP ç‰ˆæœ¬</title>
    
    <!-- AMP æ ¸å¿ƒè„šæœ¬ -->
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    
    <!-- AMP å¹¿å‘Šè„šæœ¬ -->
    <script async custom-element="amp-ad" src="https://cdn.ampproject.org/v0/amp-ad-0.1.js"></script>
    
    <!-- AMP æ ·å¼ -->
    <style amp-custom>
        * { box-sizing: border-box; }
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #1f2937;
        }
        .container { max-width: 900px; margin: 0 auto; padding: 24px; }
        .card {
            background: rgba(255,255,255,0.98);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            border: 1px solid rgba(0,0,0,0.05);
            margin: 20px 0;
        }
        .header { text-align: center; color: #fff; margin: 24px 0; }
        .header h1 { margin: 0 0 8px; font-size: 32px; }
        .header p { margin: 0; opacity: 0.9; }
        .btn {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            border: none;
            padding: 12px 24px;
            border-radius: 999px;
            cursor: pointer;
            font-weight: 600;
            box-shadow: 0 8px 20px rgba(102,126,234,0.35);
            transition: transform 0.15s ease, box-shadow 0.2s ease;
            text-decoration: none;
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 12px 28px rgba(102,126,234,0.5); }
        .center { text-align: center; }
        .hidden { display: none; }
        .progress { height: 8px; background: #e5e7eb; border-radius: 999px; overflow: hidden; margin: 12px 0 20px; }
        .progress-bar { height: 100%; width: 0%; background: linear-gradient(90deg, #34d399, #10b981); transition: width .25s ease; }
        .q-text { font-size: 20px; color: #111827; margin: 8px 0 12px; }
        .opt { 
            border: 2px solid #e5e7eb; 
            border-radius: 12px; 
            padding: 14px; 
            margin: 10px 0; 
            cursor: pointer; 
            transition: all .15s ease; 
            background: #fff; 
        }
        .opt:hover { border-color: #667eea; box-shadow: 0 6px 18px rgba(102,126,234,0.15); transform: translateY(-1px); }
        .opt.selected { border-color: #667eea; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; box-shadow: 0 10px 24px rgba(102,126,234,0.4); }
        .nav { display: flex; justify-content: space-between; gap: 12px; margin-top: 16px; }
        .result-type { font-size: 40px; font-weight: 800; color: #4f46e5; margin: 8px 0 16px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 14px; }
        .pill { display:inline-block; padding:6px 12px; border-radius:999px; background:#eef2ff; color:#3730a3; font-weight:600; font-size:12px; }
        .muted { color: #6b7280; font-size: 14px; }
        a.link { color: #4f46e5; text-decoration: none; font-weight: 600; }
        a.link:hover { text-decoration: underline; }
        
        /* AMP å¹¿å‘Šæ ·å¼ */
        .amp-ad-container {
            margin: 20px 0;
            text-align: center;
        }
        .ad-label {
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 8px;
            display: block;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>ğŸ§  MBTI æµ‹è¯• - AMP ç‰ˆæœ¬</h1>
            <p>å¿«é€Ÿå‡†ç¡®çš„ 16 å‹äººæ ¼æµ‹è¯• Â· æ”¯æŒ AMP å¹¿å‘Š</p>
        </div>
    </div>

    <div class="container">
        <!-- é¡¶éƒ¨å¹¿å‘Š -->
        <div class="amp-ad-container">
            <span class="ad-label">å¹¿å‘Š</span>
            <amp-ad width="100vw" height="320"
                 type="adsense"
                 data-ad-client="ca-pub-4198974976257818"
                 data-ad-slot="9310887265"
                 data-auto-format="rspv"
                 data-full-width="">
              <div overflow=""></div>
            </amp-ad>
        </div>

        <!-- æ¬¢è¿é¡µé¢ -->
        <div id="welcome" class="card">
            <h2 class="center" style="margin-top:0">å¼€å§‹æµ‹è¯•</h2>
            <p class="muted">
                é€‰æ‹©æœ€ç¬¦åˆä½ ç›´è§‰çš„é€‰é¡¹ã€‚æ²¡æœ‰å¯¹é”™ä¹‹åˆ†ï¼Œè¯·æ ¹æ®ç¬¬ä¸€æ„Ÿè§‰å›ç­”ã€‚
            </p>
            
            <div class="card" style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border: 1px solid #f59e0b; margin: 16px 0;">
                <h3 style="margin: 0 0 8px; color: #92400e;">ğŸŒŸ æµ‹è¯•äº®ç‚¹</h3>
                <p style="margin: 0; color: #92400e; font-size: 14px;">
                    åŸºäºè£æ ¼ç†è®ºçš„ 12 é¢˜å¿«é€Ÿæµ‹è¯•ï¼Œå‡†ç¡®è¯„ä¼°ä½ çš„ MBTI ç±»å‹ï¼š
                </p>
                <ul style="margin: 8px 0 0 18px; color: #92400e; font-size: 14px;">
                    <li>æ ‡å‡† MBTI å››ç»´åº¦åˆ†æ</li>
                    <li>ä¸“ä¸šç±»å‹è§£è¯»</li>
                    <li>ä¸ªæ€§åŒ–å‘å±•å»ºè®®</li>
                    <li>èŒä¸šåŒ¹é…åˆ†æ</li>
                </ul>
            </div>
            
            <div class="center" style="margin-top:16px">
                <button class="btn" type="button" onclick="startTest()">å¼€å§‹æµ‹è¯•</button>
                <a class="link" href="index.html" style="margin-left:12px">è¿”å›é¦–é¡µ</a>
            </div>
        </div>

        <!-- æµ‹è¯•é¡µé¢ -->
        <div id="testing" class="card hidden">
            <div class="progress"><div id="pbar" class="progress-bar"></div></div>
            <div class="muted" id="ptext">0/12</div>
            <div id="qText" class="q-text">é—®é¢˜</div>
            <div id="opts"></div>
            <div class="nav">
                <button id="prevBtn" class="btn" type="button" onclick="prev()">ä¸Šä¸€é¢˜</button>
                <button id="nextBtn" class="btn" type="button" onclick="next()">ä¸‹ä¸€é¢˜</button>
            </div>
        </div>

        <!-- ç»“æœé¡µé¢ -->
        <div id="result" class="card hidden">
            <div class="center">
                <div class="pill">ä½ çš„ MBTI ç±»å‹</div>
                <div id="type" class="result-type">XXXX</div>
                <p class="muted">å››ç»´åº¦åˆ†å¸ƒï¼š</p>
            </div>
            <div id="breakdown" style="margin-top:12px"></div>
            
            <!-- ç»“æœé¡µå¹¿å‘Š -->
            <div class="amp-ad-container">
                <span class="ad-label">å¹¿å‘Š</span>
                <amp-ad width="100vw" height="320"
                     type="adsense"
                     data-ad-client="ca-pub-4198974976257818"
                     data-ad-slot="9310887265"
                     data-auto-format="rspv"
                     data-full-width="">
                  <div overflow=""></div>
                </amp-ad>
            </div>
            
            <div class="center" style="margin-top:16px">
                <button class="btn" type="button" onclick="restart()">é‡æ–°æµ‹è¯•</button>
                <a class="link" href="index.html" style="margin-left:12px">è¿”å›é¦–é¡µ</a>
            </div>
        </div>
    </div>

    <!-- åº•éƒ¨ç²˜æ€§å¹¿å‘Š -->
    <div class="amp-ad-container" style="position: fixed; bottom: 0; left: 0; right: 0; background: white; padding: 10px; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); z-index: 1000;">
        <amp-ad width="100vw" height="100"
             type="adsense"
             data-ad-client="ca-pub-4198974976257818"
             data-ad-slot="9310887265"
             data-auto-format="rspv"
             data-full-width="">
          <div overflow=""></div>
        </amp-ad>
    </div>

    <script>
        // ç®€åŒ–çš„æµ‹è¯•é€»è¾‘ï¼ˆAMP å…¼å®¹ï¼‰
        const QUESTIONS = [
            { d: 'EI', t: 'é‡åˆ°æ–°åŒäº‹æ—¶ï¼Œä½ å€¾å‘äºï¼š', a: { text: 'ä¸»åŠ¨æ‰“æ‹›å‘¼å¹¶å¿«é€Ÿç†Ÿæ‚‰', v: 'E' }, b: { text: 'å…ˆè§‚å¯Ÿå†æ…¢æ…¢ç†Ÿæ‚‰', v: 'I' } },
            { d: 'SN', t: 'åšå†³å®šæ—¶ï¼Œä½ æ›´é‡è§†ï¼š', a: { text: 'å®é™…ç»†èŠ‚å’Œå¯è¡Œæ€§', v: 'S' }, b: { text: 'å¯èƒ½æ€§å’Œé•¿è¿œæ„¿æ™¯', v: 'N' } },
            { d: 'TF', t: 'åœ¨åˆ†æ­§ä¸­ï¼Œä½ æ›´å…³æ³¨ï¼š', a: { text: 'é€»è¾‘ä¸€è‡´æ€§å’Œå®¢è§‚å¯¹é”™', v: 'T' }, b: { text: 'ä»–äººæ„Ÿå—å’Œå…³ç³»å’Œè°', v: 'F' } },
            { d: 'JP', t: 'å¤„ç†ä»»åŠ¡æ—¶ï¼Œä½ åå¥½ï¼š', a: { text: 'æœ‰è®¡åˆ’æœ‰ç§©åºåœ°æ¨è¿›', v: 'J' }, b: { text: 'çµæ´»å®‰æ’å’Œè°ƒæ•´', v: 'P' } },
            { d: 'EI', t: 'å‘¨æœ«ç¤¾äº¤æ´»åŠ¨å¯¹ä½ æ¥è¯´æ˜¯ï¼š', a: { text: 'å……æ»¡æ´»åŠ›ï¼Œè¶Šçƒ­é—¹è¶Šå¥½', v: 'E' }, b: { text: 'æ¶ˆè€—ç²¾åŠ›ï¼Œå®‰é™æ—¶å…‰æ›´å¥½', v: 'I' } },
            { d: 'SN', t: 'å­¦ä¹ æ–°æŠ€èƒ½æ—¶ï¼Œä½ ï¼š', a: { text: 'ä»æ­¥éª¤æ•™ç¨‹å¼€å§‹', v: 'S' }, b: { text: 'å…ˆæŒæ¡åŸç†å†ç»ƒä¹ ', v: 'N' } },
            { d: 'TF', t: 'è¯„ä¼°é€‰é¡¹æ—¶ï¼Œä½ ï¼š', a: { text: 'åˆ—å‡ºæ ‡å‡†å¹¶æƒè¡¡åˆ©å¼Š', v: 'T' }, b: { text: 'è€ƒè™‘å½±å“å’Œä»·å€¼è§‚', v: 'F' } },
            { d: 'JP', t: 'æ—…è¡Œå‰ï¼Œä½ çš„å‡†å¤‡æ˜¯ï¼š', a: { text: 'å®Œæ•´çš„è¡Œç¨‹æ¸…å•', v: 'J' }, b: { text: 'éšæ€§æ¢ç´¢', v: 'P' } },
            { d: 'EI', t: 'åœ¨ä¼šè®®ä¸­ä½ æ›´å¸¸ï¼š', a: { text: 'ç§¯æå‘è¨€å¹¶å¸¦åŠ¨æ°›å›´', v: 'E' }, b: { text: 'å€¾å¬å¹¶å®Œå–„è§‚ç‚¹', v: 'I' } },
            { d: 'SN', t: 'é—®é¢˜å‡ºç°æ—¶ï¼Œä½ é¦–å…ˆï¼š', a: { text: 'æ ¸å®äº‹å®å¹¶é€æ­¥æ’æŸ¥', v: 'S' }, b: { text: 'å‡­ç›´è§‰æ‰¾åˆ°å…³é”®ç‚¹', v: 'N' } },
            { d: 'TF', t: 'æ”¶åˆ°åé¦ˆæ—¶ï¼Œä½ åå¥½ï¼š', a: { text: 'ç›´æ¥ã€å…·ä½“ã€å¯æ“ä½œ', v: 'T' }, b: { text: 'å§”å©‰ã€é¼“åŠ±ã€é¡¾åŠæƒ…æ„Ÿ', v: 'F' } },
            { d: 'JP', t: 'é¢å¯¹æˆªæ­¢æ—¥æœŸï¼Œä½ é€šå¸¸ï¼š', a: { text: 'æå‰å®Œæˆç•™å‡ºç¼“å†²', v: 'J' }, b: { text: 'ä¸´è¿‘æˆªæ­¢æ—¶è¡¨ç°æ›´å¥½', v: 'P' } }
        ];

        let currentIndex = -1;
        let selections = Array(QUESTIONS.length).fill(null);
        const scores = { E:0,I:0,S:0,N:0,T:0,F:0,J:0,P:0 };

        function $(sel){ return document.querySelector(sel); }

        function show(section){
            ['#welcome','#testing','#result'].forEach(id=>$(id).classList.add('hidden'));
            $(section).classList.remove('hidden');
        }

        function startTest(){
            currentIndex = 0;
            selections.fill(null);
            Object.keys(scores).forEach(k => scores[k] = 0);
            renderQuestion();
            show('#testing');
        }

        function renderQuestion(){
            const q = QUESTIONS[currentIndex];
            $('#qText').textContent = `${currentIndex+1}. ${q.t}`;
            const opts = $('#opts');
            opts.innerHTML = '';
            [q.a, q.b].forEach((opt, idx) => {
                const div = document.createElement('div');
                div.className = 'opt' + (selections[currentIndex] === opt.v ? ' selected' : '');
                div.innerHTML = `${opt.text}`;
                div.onclick = () => selectOption(opt.v);
                opts.appendChild(div);
            });
            $('#prevBtn').disabled = currentIndex === 0;
            $('#nextBtn').textContent = currentIndex === QUESTIONS.length - 1 ? 'æäº¤' : 'ä¸‹ä¸€é¢˜';
            $('#nextBtn').disabled = selections[currentIndex] == null;
            const pct = Math.round(((currentIndex) / QUESTIONS.length) * 100);
            $('#pbar').style.width = `${pct}%`;
            $('#ptext').textContent = `${currentIndex}/${QUESTIONS.length}`;
        }

        function selectOption(val){
            selections[currentIndex] = val;
            const opts = $('#opts').children;
            Array.from(opts).forEach(el => el.classList.remove('selected'));
            const chosen = Array.from(opts).find(el => el.textContent.trim());
            $('#nextBtn').disabled = false;
            setTimeout(() => { next(); }, 600);
        }

        function next(){
            if (selections[currentIndex] == null) return;
            if (currentIndex === QUESTIONS.length - 1) { submit(); return; }
            currentIndex += 1;
            renderQuestion();
        }

        function prev(){
            if (currentIndex === 0) return;
            currentIndex -= 1;
            renderQuestion();
        }

        function submit(){
            // è®¡ç®—åˆ†æ•°
            Object.keys(scores).forEach(k => scores[k] = 0);
            selections.forEach((val) => { if (val) scores[val] += 1; });
            const getPair = (a,b) => scores[a] >= scores[b] ? a : b;
            const type = [ getPair('E','I'), getPair('S','N'), getPair('T','F'), getPair('J','P') ].join('');

            // ç™¾åˆ†æ¯”
            const countByDim = { EI:0, SN:0, TF:0, JP:0 };
            QUESTIONS.forEach(q => countByDim[q.d] += 1);
            const pct = {
                E: Math.round(100 * scores.E / countByDim.EI),
                I: Math.round(100 * scores.I / countByDim.EI),
                S: Math.round(100 * scores.S / countByDim.SN),
                N: Math.round(100 * scores.N / countByDim.SN),
                T: Math.round(100 * scores.T / countByDim.TF),
                F: Math.round(100 * scores.F / countByDim.TF),
                J: Math.round(100 * scores.J / countByDim.JP),
                P: Math.round(100 * scores.P / countByDim.JP)
            };

            // æ¸²æŸ“ç»“æœ
            $('#type').textContent = type;
            $('#breakdown').innerHTML = `
                <div class="grid">
                    <div class="card"><div class="pill">å¤–å‘ E / å†…å‘ I</div><p class="muted">E ${pct.E}% Â· I ${pct.I}%</p></div>
                    <div class="card"><div class="pill">æ„Ÿè§‰ S / ç›´è§‰ N</div><p class="muted">S ${pct.S}% Â· N ${pct.N}%</p></div>
                    <div class="card"><div class="pill">æ€è€ƒ T / æƒ…æ„Ÿ F</div><p class="muted">T ${pct.T}% Â· F ${pct.F}%</p></div>
                    <div class="card"><div class="pill">åˆ¤æ–­ J / æ„ŸçŸ¥ P</div><p class="muted">J ${pct.J}% Â· P ${pct.P}%</p></div>
                </div>
            `;

            show('#result');
        }

        function restart(){
            currentIndex = -1;
            selections.fill(null);
            Object.keys(scores).forEach(k => scores[k] = 0);
            show('#welcome');
        }
    </script>
</body>
</html>